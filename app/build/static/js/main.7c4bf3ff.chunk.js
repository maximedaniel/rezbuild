(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t){var a={LANES:{BACKLOG:"lane_backlog",TODO:"lane_todo",DONE:"lane_done"},ROLES:{CUSTOMER:{name:"Customer",description:"A customer...",actions:[]},ANALYST:{name:"Analyst",description:"An analyst...",actions:["KPI_ECONOMICAL_ASIS","KPI_SOCIAL_ASIS","KPI_ENERGICAL_ASIS","KPI_COMFORT_ASIS","KPI_ECONOMICAL_TOBE","KPI_SOCIAL_TOBE","KPI_ENERGICAL_TOBE","KPI_COMFORT_TOBE"]},DESIGNER:{name:"Designer",description:"A designer...",actions:["MODEL_ASIS","MODEL_TOBE"]}},STATUS:{INIT:["MODEL_ASIS"],MODEL_ASIS:["MODEL_ASIS","KPI_ECONOMICAL_ASIS","KPI_SOCIAL_ASIS","KPI_ENERGICAL_ASIS","KPI_COMFORT_ASIS","MODEL_TOBE"],MODEL_TOBE:["MODEL_TOBE","KPI_ECONOMICAL_TOBE","KPI_SOCIAL_TOBE","KPI_ENERGICAL_TOBE","KPI_COMFORT_TOBE"],KPI_ECONOMICAL_ASIS:["KPI_ECONOMICAL_ASIS"],KPI_SOCIAL_ASIS:["KPI_SOCIAL_ASIS"],KPI_ENERGICAL_ASIS:["KPI_ENERGICAL_ASIS"],KPI_COMFORT_ASIS:["KPI_COMFORT_ASIS"],KPI_ECONOMICAL_TOBE:["KPI_ECONOMICAL_TOBE"],KPI_SOCIAL_TOBE:["KPI_SOCIAL_TOBE"],KPI_ENERGICAL_TOBE:["KPI_ENERGICAL_TOBE"],KPI_COMFORT_TOBE:["KPI_COMFORT_TOBE"]},ACTIONS:{MODEL_ASIS:{description:["Upload the 3D model of the building as it is."],names:["ASIS model"],formats:[".ifc"],typeValues:[Object],values:[""],minValues:[""],maxValues:[""],priorities:[!0]},KPI_ECONOMICAL_ASIS:{description:["Assess the economical quality of the 3D model of the building as it is."],names:["Payback period","Internal rate of return","Life cycle cost","Net present value","Return on rquity","Incremental discounted payback period","Change in value of buildings property","Payback time","Return on investments","Annual costs"],formats:["years","%","k\u20ac","\u20ac","%","years","\u20ac","years","%","\u20ac"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Number,Number],minValues:[25,5,0,0,5,5,0,5,0,0],values:[25,5,0,0,5,5,0,5,0,0],maxValues:[5,25,200,1e6,25,25,100,25,25,3e3],priorities:[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]},KPI_ENERGICAL_ASIS:{description:["Assess the energy quality of the 3D model of the building as it is."],names:["Primary electric energy demand","Primary thermal energy demand","Total electric and thermal energy consumption per gross surface unit","Primary energy demand reduction","Electrical energy bill per gross internal surface unit","Thermal energy bill per gross internal surface unit","Building heat transfer coefficient (U value)","Electric energy consumption per gross surface unit","Use of renewable energy","Thermal energy consumption per gross surface unit","Reduction in annual final energy consumption","Percentage of Renewable energy use","Reduction in lifecycle CO2 emissions in tonnes","Energy savings","Reduction of CO2","Annual final energy consumption","Sustainable resource use","Carbon dioxide emission in tonnes reduction","Energy class of the building"],formats:["toe","toe","(toe/m2* y)*1000","%","\u20ac/ m2 *y","\u20ac/ m2 *y","kW/m2/K","kWhe/m2 *y","","kWht/m2 *y","% in kWh","%","%","kWh","tCO2","kWh/y","% ","%","A-G"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Boolean,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number],minValues:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],values:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],maxValues:[2,2,4,100,40,100,10,200,1,500,100,100,100,15e3,5,15e3,100,100,6],priorities:[!1,!1,!1,!0,!1,!1,!1,!0,!1,!0,!0,!0,!1,!1,!1,!0,!1,!0,!0]},KPI_SOCIAL_ASIS:{description:["Assess the social quality of the 3D model of the building as it is."],names:["Occupant satisfaction","Arrears on utility bills","Hidden energy poverty","High share of energy expenditure in income","Inability to keep home adequately warm","Fuel oil prices","Biomass prices","Household electricity prices","District heating prices","Household gas prices","Dwelling comfortably cool during summer time","Dwelling comfortably warm during winter time","Presence of leak, damp, rot","Installation time reduction"],formats:["pts","months","\u20ac","\u20ac","%","\u20ac","\u20ac","\u20acc","\u20acc","\u20ac","pts","pts","","%"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Boolean,Number],minValues:[1,1,0,0,0,0,0,5,2,0,1,1,0,0],values:[1,1,0,0,0,0,0,5,2,0,1,1,0,0],maxValues:[5,3,1e6,1e6,100,1e6,1e6,30,20,1e6,5,5,1,100],priorities:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1]},KPI_COMFORT_ASIS:{description:["Assess the comfort quality of the 3D model of the building as it is."],names:["Room temperature","Thermal comfort / Humidity","CO2 concentration","Formaldehyde (HCHO) concentration","% time inside the hygrothermal zone","Total VOCs (PM2.5, PM10, PM20)"],formats:["\xb0C","%","mg/m3, ppm","mg/m3, ppm","%","ug/m3, ppm"],typeValues:[Number,Number,Number,Number,Number,Number],minValues:[5,30,200,0,0,0],values:[5,30,200,0,0,0],maxValues:[45,100,2e3,2e3,100,100],priorities:[!1,!0,!1,!0,!1,!1]},MODEL_TOBE:{description:["Upload the 3D model of the building as it will be."],names:["TOBE model"],formats:[".ifc"],typeValues:[Object],values:[""],minValues:[""],maxValues:[""],priorities:[!0]},KPI_ECONOMICAL_TOBE:{description:["Assess the economical quality of the 3D model of the building as it will be."],names:["Payback period","Internal rate of return","Life cycle cost","Net present value","Return on rquity","Incremental discounted payback period","Change in value of buildings property","Payback time","Return on investments","Annual costs"],formats:["years","%","k\u20ac","\u20ac","%","years","\u20ac","years","%","\u20ac"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Number,Number],minValues:[25,5,0,0,5,5,0,5,0,0],values:[25,5,0,0,5,5,0,5,0,0],maxValues:[5,25,200,1e6,25,25,100,25,25,3e3],priorities:[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]},KPI_ENERGICAL_TOBE:{description:["Assess the energy quality of the 3D model of the building as it will be."],names:["Primary electric energy demand","Primary thermal energy demand","Total electric and thermal energy consumption per gross surface unit","Primary energy demand reduction","Electrical energy bill per gross internal surface unit","Thermal energy bill per gross internal surface unit","Building heat transfer coefficient (U value)","Electric energy consumption per gross surface unit","Use of renewable energy","Thermal energy consumption per gross surface unit","Reduction in annual final energy consumption","Percentage of Renewable energy use","Reduction in lifecycle CO2 emissions in tonnes","Energy savings","Reduction of CO2","Annual final energy consumption","Sustainable resource use","Carbon dioxide emission in tonnes reduction","Energy class of the building"],formats:["toe","toe","(toe/m2* y)*1000","%","\u20ac/ m2 *y","\u20ac/ m2 *y","kW/m2/K","kWhe/m2 *y","","kWht/m2 *y","% in kWh","%","%","kWh","tCO2","kWh/y","% ","%","A-G"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Boolean,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number],minValues:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],values:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6],maxValues:[2,2,4,100,40,100,10,200,1,500,100,100,100,15e3,5,15e3,100,100,"A"],priorities:[!1,!1,!1,!0,!1,!1,!1,!0,!1,!0,!0,!0,!1,!1,!1,!0,!1,!0,!0]},KPI_SOCIAL_TOBE:{description:["Assess the social quality of the 3D model of the building as it will be."],names:["Occupant satisfaction","Arrears on utility bills","Hidden energy poverty","High share of energy expenditure in income","Inability to keep home adequately warm","Fuel oil prices","Biomass prices","Household electricity prices","District heating prices","Household gas prices","Dwelling comfortably cool during summer time","Dwelling comfortably warm during winter time","Presence of leak, damp, rot","Installation time reduction"],formats:["pts","months","\u20ac","\u20ac","%","\u20ac","\u20ac","\u20acc","\u20acc","\u20ac","pts","pts","","%"],typeValues:[Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Number,Boolean,Number],minValues:[1,1,0,0,0,0,0,5,2,0,1,1,0,0],values:[1,1,0,0,0,0,0,5,2,0,1,1,0,0],maxValues:[5,3,1e6,1e6,100,1e6,1e6,30,20,1e6,5,5,1,100],priorities:[!0,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1]},KPI_COMFORT_TOBE:{description:["Assess the comfort quality of the 3D model of the building as it will be."],names:["Room temperature","Thermal comfort / Humidity","CO2 concentration","Formaldehyde (HCHO) concentration","% time inside the hygrothermal zone","Total VOCs (PM2.5, PM10, PM20)"],formats:["\xb0C","%","mg/m3, ppm","mg/m3, ppm","%","ug/m3, ppm"],typeValues:[Number,Number,Number,Number,Number,Number],minValues:[5,30,200,0,0,0],values:[5,30,200,0,0,0],maxValues:[45,100,2e3,2e3,100,100],priorities:[!1,!0,!1,!0,!1,!1]}}};e.exports=a},323:function(e,t,a){e.exports=a(624)},621:function(e,t){},624:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),s=a.n(r),i=a(6),o=a(7),c=a(9),m=a(8),d=a(10),u=a(22),p=a(3),h=a(29),f=a.n(h),E=l.a.createContext();f.a.defaults.withCredentials=!0;var v=window.$,g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){v(document).ready(function(){v(".tooltipped").tooltip({delay:0,html:!0})})}},{key:"componentWillUnmount",value:function(){v(".tooltipped").tooltip("remove")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){t.props.socket.emit("/api/signin",t.refs.email.value,t.refs.password.value,function(e){if(e.user)if(t.props.params._id){var a={_id:t.props.params._id},n={$push:{users:e.user._id}};t.props.socket.emit("/api/project/update",a,n,function(e){e.projects&&t.setState({error:!1,pending:!1},function(){u.d.push("/")}),e.error&&t.setState({error:e.error,pending:!1})})}else t.setState({error:null,pending:!1},function(){u.d.push("/")});e.error&&t.setState({error:e.error,pending:!1})})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row",style:{paddingTop:"25vh"}},l.a.createElement("div",{className:"col push-l4 l4 push-m3 m6 push-s1 s10 center white z-depth-1",style:{padding:"0rem",fontSize:"0"}},l.a.createElement("div",{className:"col s12 rezbuild white-text"},l.a.createElement("div",{className:"col s6 left-align"},l.a.createElement("h5",{className:"header"},"Sign in")),l.a.createElement("div",{className:"col s6 right-align"},l.a.createElement("img",{src:"/img/jpg/logo.jpg",alt:"logo",style:{maxHeight:"4rem"}}))),l.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_email",name:"email",ref:"email",type:"email",autoComplete:"username email",required:!0}),l.a.createElement("label",{htmlFor:"input_email"},"Email")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_password",name:"password",ref:"password",type:"password",autoComplete:"current-password",required:!0}),l.a.createElement("label",{htmlFor:"input_password"},"Password")),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"",l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s6"},l.a.createElement("button",{className:"btn waves-effect waves-light"},"  SUBMIT  ",l.a.createElement("i",{className:"material-icons right"},"send"))),l.a.createElement("div",{className:"col s6"},l.a.createElement("button",{className:"btn waves-effect waves-light white rezbuild-text",onClick:function(){return u.d.push((e.props.params._id?"/"+e.props.params._id:"")+"/signup")}}," ",l.a.createElement("i",{className:"material-icons left"},"person_add")," SIGN UP"))))))}}]),t}(n.Component),b=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(g,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},N=a(26),k=a(15),_=a.n(k),y=window.$,w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){y(document).ready(function(){y("select").material_select(),y(".tooltipped").tooltip({delay:0,html:!0})})}},{key:"componentWillUnmount",value:function(){y(".tooltipped").tooltip("remove")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={email:t.refs.email.value,password:t.refs.password.value,firstname:t.refs.firstname.value.charAt(0).toUpperCase()+t.refs.firstname.value.toLowerCase().slice(1),lastname:t.refs.lastname.value.toUpperCase(),roles:y("#select_signup_roles  option:selected").map(function(){return y(this).val()}).get()};t.props.socket.emit("/api/signup",e,function(e){e.user&&t.setState({error:!1,pending:!1},function(){u.d.push((t.props.params._id?"/"+t.props.params._id:"")+"/signin")}),e.error&&t.setState({user:null,error:e.error,pending:!1})})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row",style:{paddingTop:"8vh"}},l.a.createElement("div",{className:"col push-l4 l4 push-m3 m6 push-s1 s10 center white z-depth-1",style:{padding:"0rem",fontSize:"0"}},l.a.createElement("div",{className:"col s12 rezbuild white-text"},l.a.createElement("div",{className:"col s6 left-align"},l.a.createElement("h5",{className:"header"},"Sign up")),l.a.createElement("div",{className:"col s6 right-align"},l.a.createElement("img",{src:"/img/jpg/logo.jpg",alt:"logo",style:{maxHeight:"4rem"}}))),l.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_firstname",ref:"firstname",name:"firstname",type:"text",required:!0}),l.a.createElement("label",{htmlFor:"input_firstname"},"First name")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_lastname",ref:"lastname",name:"lastname",type:"text",required:!0}),l.a.createElement("label",{htmlFor:"input_lastname"},"Last name")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{multiple:!0,required:!0,defaultValue:[Object.keys(_.a.ROLES)[0]],id:"select_signup_roles",ref:"select_signup_roles"},l.a.createElement("option",{value:"",disabled:!0},"Choose your role(s)"),Object.entries(_.a.ROLES).map(function(e){var t=Object(N.a)(e,2),a=t[0],n=t[1];return l.a.createElement("option",{name:"roles",value:a,id:"signup_role_"+a,key:a},n.name)})),l.a.createElement("label",null,"Role(s)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_email",ref:"email",name:"email",type:"email",required:!0}),l.a.createElement("label",{htmlFor:"input_email"},"Email")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_password",ref:"password",type:"password",name:"password",required:!0}),l.a.createElement("label",{htmlFor:"input_password"},"Password")),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"",l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s6"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"SUBMIT  ",l.a.createElement("i",{class:"material-icons right"},"send"))),l.a.createElement("div",{className:"col s6"},l.a.createElement("button",{className:"btn waves-effect waves-light white rezbuild-text",onClick:function(){return u.d.push((e.props.params._id?"/"+e.props.params._id:"")+"/signin")}},"  ",l.a.createElement("i",{class:"material-icons left"},"cancel")," CANCEL"))))))}}]),t}(n.Component),j=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(w,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},O=window.$,x=window.Materialize,S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.user.roles.map(function(e,t){return O("#settings_role_"+e).prop("selected",!0)}),O(document).ready(function(){O("#select_settings_roles").material_select(),x.updateTextFields()}),this.props.socket.on("/api/user/done",function(t){e.props.update()})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={email:t.refs.email.value,password:t.refs.password.value,firstname:t.refs.firstname.value.charAt(0).toUpperCase()+t.refs.firstname.value.toLowerCase().slice(1),lastname:t.refs.lastname.value.toUpperCase(),roles:O("#select_settings_roles option:selected").map(function(){return O(this).val()}).get()};t.props.socket.emit("/api/user/update",{_id:"token"},e,function(e){e.users&&t.setState({error:!1,pending:!1},function(){O("#modal_settings").modal("close"),t.props.socket.emit("/api/user/done")}),e.error&&t.setState({error:e.error,pending:!1})})})}},{key:"cancel",value:function(){O("#modal_settings").modal("close")}},{key:"render",value:function(){var e;return e=l.a.createElement("div",null,l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Settings")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6",style:{lineHeight:"1.5"}},l.a.createElement("input",{id:"input_firstname",ref:"firstname",name:"firstname",type:"text",defaultValue:this.props.user.firstname,required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_firstname"},"First name")),l.a.createElement("div",{className:"input-field col s6",style:{lineHeight:"1.5"}},l.a.createElement("input",{id:"input_lastname",ref:"lastname",name:"lastname",type:"text",defaultValue:this.props.user.lastname,required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_lastname"},"Last name")),l.a.createElement("div",{className:"input-field col s12",style:{lineHeight:"1.5"}},l.a.createElement("select",{multiple:!0,ref:"select_settings_roles",id:"select_settings_roles",required:!0},l.a.createElement("option",{value:"",disabled:!0},"Choose your role(s)"),Object.entries(_.a.ROLES).map(function(e){var t=Object(N.a)(e,2),a=t[0],n=t[1];return l.a.createElement("option",{name:"roles",value:a,id:"settings_role_"+a,key:a},n.name)})),l.a.createElement("label",null,"Role(s)")),l.a.createElement("div",{className:"input-field col s6",style:{lineHeight:"1.5"}},l.a.createElement("input",{id:"input_email",ref:"email",name:"email",type:"email",autoComplete:"username email",defaultValue:this.props.user.email,required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_email"},"Email")),l.a.createElement("div",{className:"input-field col s6",style:{lineHeight:"1.5"}},l.a.createElement("input",{id:"input_password",ref:"password",type:"password",name:"password",autoComplete:"current-password",required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_password"},"New Password"))),l.a.createElement("div",{className:"row"},this.state.pending?l.a.createElement("div",{className:"col s12 center"},l.a.createElement("div",{className:"preloader-wrapper small active center"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))):"",this.state.error?l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error)):"",l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"SUBMIT",l.a.createElement("i",{className:"material-icons right",style:{lineHeight:"1.5"}},"send"))),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild-text white",href:"#!",onClick:this.cancel},l.a.createElement("i",{className:"material-icons left",style:{lineHeight:"1.5"}},"cancel"),"CANCEL")))))),l.a.createElement("div",{id:"modal_settings",className:"modal"},e)}}]),t}(n.Component),T=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(S,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})};f.a.defaults.withCredentials=!0;var C=window.$,A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSignout=a.handleSignout.bind(Object(p.a)(a)),a.update=a.update.bind(Object(p.a)(a)),a.state={user:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){var e=this;C(".button-collapse").sideNav("hide"),this.setState({user:null,error:!1,pending:!0},function(){e.props.socket.emit("/api/user/get",{_id:"token"},function(t){t.users?e.setState({user:t.users[0],error:!1,pending:!1}):t.error?e.setState({user:null,error:t.error,pending:!1},function(){u.d.push("/signin")}):e.setState({user:null,error:"Network error",pending:!1})})})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(e,t){t.user!==this.state.user&&(C(".button-collapse").sideNav(),C("#modal_settings").modal(),C(".tooltipped").tooltip({delay:0}))}},{key:"componentWillUnmount",value:function(){C(".tooltipped").tooltip("remove")}},{key:"handleSignout",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){t.props.socket.emit("/api/signout",{},function(e){e.user&&t.setState({error:null,pending:!1},function(){C(".button-collapse").sideNav("hide"),u.d.push("/signin")})})})}},{key:"render",value:function(){var e;return this.state.user?(e=this.props.path.map(function(e,t){return l.a.createElement(u.a,{to:0===t?"/":"#!",className:"breadcrumb",key:t},e)}),l.a.createElement("nav",null,l.a.createElement("div",null,l.a.createElement("ul",{id:"slide-out",className:"side-nav"},l.a.createElement("li",{className:"row rezbuild center",style:{lineHeight:"30px"}},l.a.createElement("div",{className:"col s12"}," ",l.a.createElement("i",{className:"material-icons",style:{fontSize:"4rem"}},"account_circle")),l.a.createElement("div",{className:"col s12",style:{fontWeight:"bold"}}," ",this.state.user.firstname," ",this.state.user.lastname),l.a.createElement("div",{className:"col s12"},this.state.user.roles.filter(function(e){return _.a.ROLES.hasOwnProperty(e)}).map(function(e){return _.a.ROLES[e].name}).join(", "))),l.a.createElement("li",null,l.a.createElement("a",{className:"modal-trigger",href:"#modal_settings"},l.a.createElement("i",{className:"material-icons"},"settings"),"Settings")),l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:this.handleSignout},l.a.createElement("i",{className:"material-icons"},"arrow_back"),"Sign out"))),l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#!","data-activates":"slide-out",className:"button-collapse",style:{padding:"0",display:"inline-flex"},onClick:function(){return C(".button-collapse").sideNav("show")}},l.a.createElement("i",{className:"material-icons"},"menu")),l.a.createElement("a",{href:"#!",className:"brand-logo center hide-on-med-and-down"},"Welcome ",l.a.createElement("b",null,this.state.user.firstname)),l.a.createElement("ul",{className:"right"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!"},l.a.createElement("img",{className:"brand-logo right",src:"/img/jpg/logo.jpg",alt:"logo",style:{maxHeight:"4rem"}})))),l.a.createElement("div",{className:"col s12 left"},e))),l.a.createElement(T,{user:this.state.user,update:this.update}))):l.a.createElement("div",null)}}]),t}(n.Component),I=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(A,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})};f.a.defaults.withCredentials=!0;var D=window.$,L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={owner:"token",users:["token"]};Object.keys(t.refs).forEach(function(a){e[a]=t.refs[a].value}),t.props.socket.emit("/api/project/create",e,function(e){if(e.projects){Object.entries(_.a.ACTIONS).forEach(function(a){var n=Object(N.a)(a,2),l=n[0],r=n[1],s={project:e.projects._id,name:l,lane:"lane_backlog",content:r.description,roles:Object.keys(_.a.ROLES),action:l,names:r.names,values:r.values,formats:r.formats};t.props.socket.emit("/api/task/create",s,function(e){})});var a={project:e.projects._id,lane:"lane_done",name:"INIT",date:new Date,user:"token",content:"INIT",roles:Object.keys(_.a.ROLES),action:"INIT",names:["INIT"],values:["0"],formats:[".ifc"]};t.props.socket.emit("/api/task/create",a,function(e){}),t.setState({error:!1,pending:!1},function(){D("#modal_createproject").modal("close")})}e.error&&t.setState({error:e.error,pending:!1})})})}},{key:"componentDidMount",value:function(){D(document).ready(function(){D("ul.tabs").tabs(),D("select").material_select()})}},{key:"render",value:function(){return l.a.createElement("div",{id:"modal_createproject",className:"modal"},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Create project")),l.a.createElement("form",{className:"col s12",onSubmit:this.submit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("ul",{className:"tabs",style:{display:"none"}},l.a.createElement("li",{className:"tab col s2"},l.a.createElement("a",{href:"#general"},"General")),l.a.createElement("li",{className:"tab col s2"},l.a.createElement("a",{href:"#needs"},"Needs")),l.a.createElement("li",{className:"tab col s2"},l.a.createElement("a",{href:"#building"},"Building")),l.a.createElement("li",{className:"tab col s2"},l.a.createElement("a",{href:"#geometry"},"Geometry")),l.a.createElement("li",{className:"tab col s2"},l.a.createElement("a",{href:"#wrap"},"Wrap")))),l.a.createElement("div",{id:"general",className:"col s12"},l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{required:!0,id:"name",type:"text",ref:"name"}),l.a.createElement("label",{htmlFor:"name"},"Name")),l.a.createElement("div",{className:"input-field col s8"},l.a.createElement("input",{required:!0,id:"address",type:"text",ref:"address"}),l.a.createElement("label",{htmlFor:"address"},"Address")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{required:!0,id:"city",type:"text",ref:"city"}),l.a.createElement("label",{htmlFor:"city"},"City")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{required:!0,id:"country",type:"text",ref:"country"}),l.a.createElement("label",{htmlFor:"country"},"Country")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("select",{required:!0,defaultValue:"City center",id:"context",ref:"context"},l.a.createElement("option",{value:"",disabled:!0},"Choose a context"),l.a.createElement("option",{name:"context",value:"City center",id:"context_city_center"},"City center"),l.a.createElement("option",{name:"context",value:"Suburbs",id:"context_suburbs"},"Suburbs"),l.a.createElement("option",{name:"context",value:"Isolated",id:"context_isolated"},"Isolated")),l.a.createElement("label",null,"Context")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{required:!0,id:"degree",ref:"degree",type:"number",step:"any"}),l.a.createElement("label",{htmlFor:"degree"}," Degree Days (\xb0)")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("select",{required:!0,defaultValue:"Temperate zone",id:"climat",ref:"climat"},l.a.createElement("option",{value:"",disabled:!0},"Choose a climat zone"),l.a.createElement("option",{name:"context",value:"Tropical zone",id:"climat_tropical"},"Tropical zone"),l.a.createElement("option",{name:"context",value:"Subtropical zone",id:"climat_subtropical"},"Subtropical zone"),l.a.createElement("option",{name:"context",value:"Temperate zone",id:"climat_temperate"},"Temperate zone"),l.a.createElement("option",{name:"context",value:"Cold zone",id:"climat_cold"},"Cold zone")),l.a.createElement("label",null,"Climat Zone"))),l.a.createElement("div",{id:"needs",className:"col s12"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("textarea",{id:"refurbishment_expectations",ref:"refurbishmentExpectations",className:"materialize-textarea",defaultValue:"I want.."}),l.a.createElement("label",{className:"active",htmlFor:"refurbishment_expectations"},"Refurbishment Project Expectations")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"energy_consumption_expectations",ref:"energyConsumptionExpectations",min:"0",max:"100",defaultValue:"50"}),l.a.createElement("label",{htmlFor:"energy_consumption_expectations"},"Energy Consumption Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"environmental_expectations",ref:"environmentalExpectations",min:"0",max:"100",defaultValue:"50"}),l.a.createElement("label",{htmlFor:"environmental_expectations"},"Environmental Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"economical_expectations",ref:"economicalExpectations",min:"0",max:"100",defaultValue:"50"}),l.a.createElement("label",{htmlFor:"economical_expectations"},"Economical Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"social_expectations",ref:"socialExpectations",min:"0",max:"100",defaultValue:"50"}),l.a.createElement("label",{htmlFor:"social_expectations"},"Social Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"comfort_expectations",ref:"comfortExpectations",min:"0",max:"100",defaultValue:"50"}),l.a.createElement("label",{htmlFor:"comfort_expectations"},"Comfort Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"home_during_renovation",ref:"homeDuringRenovation"}),l.a.createElement("label",{htmlFor:"home_during_renovation"},"Don't leave home during renovation")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"different_location_during_renovation",ref:"differentLocationDuringRenovation"}),l.a.createElement("label",{htmlFor:"different_location_during_renovation"},"Have a different location during renovation")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"elevator_installation",ref:"elevatorInstallation"}),l.a.createElement("label",{htmlFor:"elevator_installation"},"Elevator Installation")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"improved_accessibility",ref:"improvedAccessibility"}),l.a.createElement("label",{htmlFor:"improved_accessibility"},"Improved Accessibility")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"reduction_bill_amount",ref:"reductionBillAmount"}),l.a.createElement("label",{htmlFor:"reduction_bill_amount"},"Reduction in bills amount")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"more_home_spaces",ref:"moreHomeSpaces"}),l.a.createElement("label",{htmlFor:"more_home_spaces"},"More home spaces")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"brighter_environments",ref:"brighterEnvironments"}),l.a.createElement("label",{htmlFor:"brighter_environments"},"Brighter environments")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"extra_service_room",ref:"extraServiceRoom"}),l.a.createElement("label",{htmlFor:"extra_service_room"},"Extra service room")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"heating_upgrading",ref:"heatingUpgrading"}),l.a.createElement("label",{htmlFor:"heating_upgrading"},"Heating upgrading")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"cooling_upgrading",ref:"coolingUpgrading"}),l.a.createElement("label",{htmlFor:"cooling_upgrading"},"Cooling upgrading")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"ventilation_upgrading",ref:"ventilationUpgrading"}),l.a.createElement("label",{htmlFor:"ventilation_upgrading"},"Ventilation upgrading")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"consumption_control",ref:"consumptionControl"}),l.a.createElement("label",{htmlFor:"consumption_control"},"Consumption control")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"eliminitation_air_infiltration",ref:"eliminitationAirInfiltration"}),l.a.createElement("label",{htmlFor:"eliminitation_air_infiltration"},"Elimination of air infiltration")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"shading_upgrading",ref:"shadingUpgrading"}),l.a.createElement("label",{htmlFor:"shading_upgrading"},"Shading upgrading")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"air_quality_improvement",ref:"airQualityImprovement"}),l.a.createElement("label",{htmlFor:"air_quality_improvement"},"Air quality improvement")),l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"noise_reduction",ref:"noiseReduction"}),l.a.createElement("label",{htmlFor:"noise_reduction"},"Noise reduction")))),l.a.createElement("div",{id:"building",className:"col s12"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"S",id:"exposure",ref:"exposure"},l.a.createElement("option",{value:"",disabled:!0},"Choose an exposure"),l.a.createElement("option",{name:"exposure",value:"N",id:"exposure_n"},"N"),l.a.createElement("option",{name:"exposure",value:"NE",id:"exposure_ne"},"NE"),l.a.createElement("option",{name:"exposure",value:"E",id:"exposure_e"},"E"),l.a.createElement("option",{name:"exposure",value:"SE",id:"exposure_se"},"SE"),l.a.createElement("option",{name:"exposure",value:"S",id:"exposure_s"},"S"),l.a.createElement("option",{name:"exposure",value:"SW",id:"exposure_sw"},"SW"),l.a.createElement("option",{name:"exposure",value:"W",id:"exposure_w"},"W"),l.a.createElement("option",{name:"exposure",value:"NW",id:"exposure_nw"},"NW")),l.a.createElement("label",null,"Exposure")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"House",id:"home",ref:"home"},l.a.createElement("option",{value:"",disabled:!0},"Choose an home type"),l.a.createElement("option",{name:"exposure",value:"House",id:"home_house"},"House"),l.a.createElement("option",{name:"exposure",value:"Apartment",id:"home_apartment"},"Apartment")),l.a.createElement("label",null,"Home Type")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"building_taxonomy",type:"text",ref:"buildingTaxonomy",defaultValue:"IN PROGRESS"}),l.a.createElement("label",{className:"active",htmlFor:"building_taxonomy"},"Building Taxonomy")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"year",type:"number",step:"any",ref:"year",defaultValue:"1984"}),l.a.createElement("label",{className:"active",htmlFor:"year"},"Construction year")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"Light",id:"gradation",ref:"gradation"},l.a.createElement("option",{value:"",disabled:!0},"Choose a color gradation of external finish"),l.a.createElement("option",{name:"gradation",value:"Light",id:"gradation_light"},"Light"),l.a.createElement("option",{name:"gradation",value:"Average",id:"gradation_average"},"Average"),l.a.createElement("option",{name:"gradation",value:"Dark",id:"gradation_dark"},"Dark")),l.a.createElement("label",null,"Color Gradation of External Finish")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"Private",id:"property",ref:"property"},l.a.createElement("option",{value:"",disabled:!0},"Property"),l.a.createElement("option",{name:"property",value:"Private",id:"property_private"},"Private"),l.a.createElement("option",{name:"property",value:"Public",id:"property_public"},"Public")),l.a.createElement("label",null,"property"))),l.a.createElement("div",{id:"geometry",className:"col s12"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"floors",ref:"floors",type:"number",step:"any",defaultValue:"2"}),l.a.createElement("label",{className:"active",htmlFor:"floors"}," Number of floors (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"inter_floor_height",ref:"interFloorHeight",type:"number",step:"any",defaultValue:"2"}),l.a.createElement("label",{className:"active",htmlFor:"inter_floor_height"}," Clear inter-floor height (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"floor_number",ref:"floorNumber",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"floor_number"},"Floor number (n\xb0) (if apartment)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"apartment_by_floor",ref:"apartmentByFloor",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"apartment_by_floor"},"Number of apartments per floor (n\xb0) (if apartment)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"total_floors_building",ref:"totalFloorsBuilding",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"total_floors_building"},"Total floors of the building (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"footprint_building",ref:"footprintBuilding",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"footprint_building"},"Net footprint of building (m\xb2)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"total_useful_surface",ref:"totalUsefulSurface",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"total_useful_surface"},"Total useful surface (m\xb2)")),l.a.createElement("h6",{className:"grey-text"},"Linear dimension divided by exposure"),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_n",ref:"linearDimensionN",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_n"},"N (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_ne",ref:"linearDimensionNE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_ne"},"NE (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_e",ref:"linearDimensionE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_e"},"E (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_se",ref:"linearDimensionSE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_se"},"SE (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_s",ref:"linearDimensionS",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_s"},"S (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_sw",ref:"linearDimensionSW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_sw"},"SW (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_w",ref:"linearDimensionW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_w"},"W (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"linear_dimension_nw",ref:"linearDimensionNW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"linear_dimension_nw"},"NW (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"Ground",id:"floor_adjacent",ref:"floorAdjacent"},l.a.createElement("option",{value:"",disabled:!0},"Choose floor adjacent to the unheated room"),l.a.createElement("option",{name:"property",value:"Ground",id:"floor_adjacent_ground"},"Ground"),l.a.createElement("option",{name:"property",value:"Cellar",id:"floor_adjacent_cellar"},"Cellar/Garage"),l.a.createElement("option",{name:"property",value:"External",id:"floor_adjacent_external"},"External"),l.a.createElement("option",{name:"property",value:"Land",id:"floor_adjacent_land"},"Land/Cellar"),l.a.createElement("option",{name:"property",value:"Outside",id:"floor_adjacent_outside"},"Cellar/Outside")),l.a.createElement("label",null,"Floor adjacent to the unheated room")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"Attic",id:"ceiling_adjacent",ref:"ceilingAdjacent"},l.a.createElement("option",{value:"",disabled:!0},"Choose ceiling adjacent to the unheated room"),l.a.createElement("option",{name:"property",value:"Attic",id:"ceiling_adjacent_attic"},"Attic"),l.a.createElement("option",{name:"property",value:"External",id:"ceiling_adjacent_external"},"External"),l.a.createElement("option",{name:"property",value:"AtticExternal",id:"ceiling_adjacent_attic_external"},"Attic/External")),l.a.createElement("label",null,"Ceiling adjacent to the unheated room")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"External stairwell",id:"wall_adjacent",ref:"wallAdjacent"},l.a.createElement("option",{value:"",disabled:!0},"Choose walls adjacent to the unheated room"),l.a.createElement("option",{name:"property",value:"Internal stairwell (only one facing)",id:"wall_adjacent_internal_one_face"},"Internal stairwell (only one facing)"),l.a.createElement("option",{name:"property",value:"Internal stairwell (no facing)",id:"wall_adjacent_internal_no_face"},"Internal stairwell (no facing)"),l.a.createElement("option",{name:"property",value:"External stairwell",id:"wall_adjacent_external"},"External stairwell"),l.a.createElement("option",{name:"property",value:"Other unheated rooms",id:"wall_adjacent_other"},"Other unheated rooms")),l.a.createElement("label",null,"Walls adjacent to the unheated room"))),l.a.createElement("div",{id:"wrap",className:"col s12"},l.a.createElement("h6",{className:"grey-text"},"Number of windows wings"),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_n",ref:"windowsN",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_n"},"N (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_ne",ref:"windowsNE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_ne"},"NE (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_e",ref:"windowsE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_e"},"E (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_se",ref:"windowsSE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_se"},"SE (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_s",ref:"windowsS",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_s"},"S (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_sw",ref:"windowsSW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_sw"},"SW (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_w",ref:"windowsW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_w"},"W (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_nw",ref:"windowsNW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_nw"},"NW (n\xb0)")),l.a.createElement("h6",{className:"grey-text"},"Number of windows-door wings"),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_n",ref:"windowsDoorN",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_n"},"N (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_ne",ref:"windowsDoorNE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_ne"},"NE (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_e",ref:"windowsDoorE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_e"},"E (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_se",ref:"windowsDoorSE",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_se"},"SE (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_s",ref:"windowsDoorS",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_s"},"S (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_sw",ref:"windowsDoorSW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_sw"},"SW (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_w",ref:"windowsDoorW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_w"},"W (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{required:!0,id:"windows_door_nw",ref:"windowsDoorNW",type:"number",step:"any",defaultValue:"0"}),l.a.createElement("label",{className:"active",htmlFor:"windows_door_nw"},"NW (n\xb0)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"Single glass",id:"type_glass",ref:"typeGlass"},l.a.createElement("option",{value:"",disabled:!0},"Choose a type of glass"),l.a.createElement("option",{name:"type_glass",value:"Single glass",id:"type_glass_single"},"Single glass"),l.a.createElement("option",{name:"type_glass",value:"Double glazing",id:"type_glass_double"},"Double glazing"),l.a.createElement("option",{name:"type_glass",value:"Low emission double glazing",id:"type_glass_low_emission_double"},"Low emission double glazing"),l.a.createElement("option",{name:"type_glass",value:"Low emission double glazing",id:"type_glass_triple"},"Triple glass"),l.a.createElement("option",{name:"type_glass",value:"Low emission double glazing",id:"type_glass_low_emission_triple"},"Low emission triple glazing")),l.a.createElement("label",null,"Type of glass")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:"PVC",id:"type_frame",ref:"typeFrame"},l.a.createElement("option",{value:"",disabled:!0},"Choose a type of frame"),l.a.createElement("option",{name:"type_frame",value:"Wood",id:"type_frame_wood"},"Wood"),l.a.createElement("option",{name:"type_frame",value:"PVC",id:"type_frame_pvc"},"PVC"),l.a.createElement("option",{name:"type_frame",value:"Metal",id:"type_frame_metal"},"Metal"),l.a.createElement("option",{name:"type_frame",value:"Miscellaneous",id:"type_frame_miscellaneous"},"Miscellaneous")),l.a.createElement("label",null,"Type of frame")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"roller_shutter_boxes",ref:"rollerShutterBoxes"}),l.a.createElement("label",{htmlFor:"roller_shutter_boxes"},"Roller shutter boxes"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"external_shields",ref:"externalShields"}),l.a.createElement("label",{htmlFor:"external_shields"},"External shields"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",null,l.a.createElement("input",{type:"checkbox",value:"0",id:"presence_balcony",ref:"presenceBalcony"}),l.a.createElement("label",{htmlFor:"presence_balcony"},"Presence of balcony"))))),l.a.createElement("div",{className:"row col s12"},l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"SUBMIT",l.a.createElement("i",{className:"material-icons right"},"send"))),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light white rezbuild-text",href:"#!",onClick:function(){return D("#modal_createproject").modal("close")}}," ",l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL"))),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):""))}}]),t}(n.Component),F=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(L,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},M=window.$,P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleJoinProject=a.handleJoinProject.bind(Object(p.a)(a)),a.state={projects:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){var e=this;this.setState({projects:null,error:!1,pending:!0},function(){e.props.socket.emit("/api/project/get",{users:{$nin:["token"]}},function(t){t.projects&&e.setState({projects:t.projects,error:!1,pending:!1},function(){var t={};e.state.projects.map(function(e,a){return t[String(e.name+"|"+e._id)]=null}),M("#input_autocomplete_joinproject").autocomplete({data:t})}),t.error&&e.setState({projects:null,error:t.error,pending:!1})})})}},{key:"componentDidMount",value:function(){var e=this;this.update(),this.props.socket.on("/api/project/done",function(){e.update()})}},{key:"handleJoinProject",value:function(e){var t=this;e.preventDefault(),this.setState({projects:this.state.projects,error:!1,pending:!0},function(){var e=t.state.projects.filter(function(e,a){return e._id===t.refs.projectname.value.split("|")[1]})[0];if(e){var a={_id:e._id};t.props.socket.emit("/api/project/update",a,{$push:{users:"token"}},function(e){e.projects&&t.setState({error:!1,pending:!1},function(){M("#modal_joinproject").modal("close")}),e.error&&t.setState({error:e.error,pending:!1})})}else t.setState({error:"Unknown project",pending:!1})})}},{key:"componentWillUnmount",value:function(){var e=this;this.props.socket.off("/api/project/done",function(){e.update()})}},{key:"render",value:function(){var e,t;this.state.pending&&(e=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"preloader-wrapper small active center"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))))),this.state.error&&(t=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))));var a=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col l12 m9 s12"},l.a.createElement("input",{placeholder:"Search a project...",id:"input_autocomplete_joinproject",type:"text",ref:"projectname",className:"autocomplete",required:!0}),l.a.createElement("label",{htmlFor:"input_autocomplete_joinproject"},"Project")),l.a.createElement("div",{className:"input-field col s6 right-align"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"SUBMIT",l.a.createElement("i",{className:"material-icons right"},"send"))),l.a.createElement("div",{className:"input-field col s6 left-align"},l.a.createElement("a",{className:"btn waves-effect waves-light white rezbuild-text",href:"#!",onClick:function(){return M("#modal_joinproject").modal("close")}}," ",l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL")));return l.a.createElement("div",{id:"modal_joinproject",className:"modal"},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Join project")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{className:"col s12",onSubmit:this.handleJoinProject,autoComplete:"off"},a,e,t)))}}]),t}(n.Component),W=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(P,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})};f.a.defaults.withCredentials=!0;var V=window.$,B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleRemoveProject=a.handleRemoveProject.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){V("#modal_removeproject_"+this.props.project._id).modal()}},{key:"componentWillUnmount",value:function(){V("#modal_removeproject_"+this.props.project._id).modal("close")}},{key:"handleRemoveProject",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={_id:t.props.project._id};t.props.socket.emit("/api/project/update",e,{$pull:{users:"token"}},function(e){e.projects&&t.setState({error:!1,pending:!1},function(){V("#modal_removeproject_"+t.props.project._id).modal("close")}),e.error&&t.setState({error:e.error,pending:!1})})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"modal_removeproject_"+this.props.project._id,className:"modal"},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Remove project")),l.a.createElement("form",{className:"col s12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h5",{className:"rezbuild-text"},"Do you want to remove ",l.a.createElement("strong",{style:{fontWeight:"900"}},this.props.project.name)," ?")),l.a.createElement("div",{className:"input-field col s6 right-align"},l.a.createElement("a",{className:"btn waves-effect waves-light",href:"#!",onClick:this.handleRemoveProject},l.a.createElement("i",{className:"material-icons right"},"check"),"YES")),l.a.createElement("div",{className:"input-field col s6 left-align"},l.a.createElement("a",{className:"btn waves-effect waves-light white rezbuild-text",href:"#!",onClick:function(){return V("#modal_removeproject_"+e.props.project._id).modal("close")}}," ",l.a.createElement("i",{className:"material-icons left"},"clear"),"NO")),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"")))}}]),t}(n.Component),z=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(B,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},R=window.$,q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={projects:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){var e=this;this.setState({projects:null,error:!1,pending:!0},function(){e.props.socket.emit("/api/project/get",{users:{$in:["token"]}},function(t){t.projects?e.setState({projects:t.projects,error:!1,pending:!1}):t.error?e.setState({projects:null,error:t.error,pending:!1}):e.setState({projects:null,error:"Network error",pending:!1})})})}},{key:"componentDidMount",value:function(){var e=this;this.update(),this.props.socket.on("/api/project/done",function(){e.update()})}},{key:"componentDidUpdate",value:function(e,t){t.projects!==this.state.projects&&(R(".modal").modal(),R(".tooltipped").tooltip({delay:0,html:!0}))}},{key:"componentWillUnmount",value:function(){var e=this;R(".tooltipped").tooltip("remove"),this.props.socket.off("/api/project/done",function(){e.update()})}},{key:"render",value:function(){var e,t,a,n;return this.state.pending&&(e=l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))),this.state.error&&(t=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error)))),this.state.projects&&(a=l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"col s3  l3 rezbuild-text left-align"}," ",l.a.createElement("h6",null,"Name")," "),l.a.createElement("div",{className:"col s5  l4 rezbuild-text left-align"},l.a.createElement("h6",null,"Creation Date")," "),l.a.createElement("div",{className:"col s4  l5 white-text"},l.a.createElement("h6",null,"Action")," "),this.state.projects.map(function(e,t){return l.a.createElement("div",{className:"col s12",style:{marginBottom:"1rem",padding:"0"},key:t},l.a.createElement("div",{className:"col s3  l3 left-align"},e.name),l.a.createElement("div",{className:"col s5  l4 left-align"},new Date(e.date).toString().split("GMT")[0]),l.a.createElement("div",{className:"col s4  l5 right-align"},l.a.createElement("a",{className:"hide-on-large-only btn waves-effect waves-light",href:"#!",onClick:function(){return u.d.push("/"+e._id)}},l.a.createElement("i",{className:"material-icons"},"open_in_browser")),l.a.createElement("a",{className:"hide-on-large-only btn waves-effect waves-light white rezbuild-text modal-trigger",style:{marginLeft:"1rem"},href:"#modal_removeproject_"+e._id},l.a.createElement("i",{className:"material-icons"},"remove_circle")),l.a.createElement("a",{className:"hide-on-med-and-down btn waves-effect waves-light",href:"#!",onClick:function(){return u.d.push("/"+e._id)}}," Open ",l.a.createElement("i",{className:"material-icons right"},"open_in_browser")),l.a.createElement("a",{className:"hide-on-med-and-down btn waves-effect waves-light white rezbuild-text modal-trigger",style:{marginLeft:"1rem"},href:"#modal_removeproject_"+e._id},l.a.createElement("i",{className:"material-icons left"},"remove_circle")," Remove"),l.a.createElement(z,{project:e})))}))),this.state.projects&&(n=l.a.createElement("div",null,l.a.createElement("div",{className:"col s4 left-align"},l.a.createElement("h5",{className:"rezbuild-text"},"Project List")),l.a.createElement("div",{className:"col s8 right-align",style:{paddingTop:"0.5rem"}},l.a.createElement("a",{className:"hide-on-med-and-up btn modal-trigger",href:"#modal_createproject"},l.a.createElement("i",{className:"material-icons"},"add_box")),l.a.createElement("a",{className:"hide-on-med-and-up btn white rezbuild-text modal-trigger",href:"#modal_joinproject",style:{marginLeft:"1rem"}},l.a.createElement("i",{className:"material-icons"},"add_to_photos")),l.a.createElement("a",{className:"hide-on-small-only btn modal-trigger",href:"#modal_createproject"},l.a.createElement("i",{className:"material-icons right"},"add_box")," NEW"),l.a.createElement("a",{className:"hide-on-small-only btn white rezbuild-text modal-trigger",href:"#modal_joinproject",style:{marginLeft:"1rem"}},l.a.createElement("i",{className:"material-icons left"},"add_to_photos"),"JOIN")))),this.state.projects?l.a.createElement("div",{className:"container",style:{marginTop:"2rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"section col s12"},l.a.createElement("div",{className:"section col s12 transparent",style:{marginBottom:"1rem"}},n),l.a.createElement("div",{className:"section col s12 white z-depth-1",style:{paddingTop:"0.5rem"}},a),l.a.createElement("div",{className:"section col s12 center"},e),l.a.createElement("div",{className:"section col s12 center"},t))),l.a.createElement(F,null),l.a.createElement(W,null)):l.a.createElement("div",null)}}]),t}(n.Component),K=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(q,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},U=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(I,{path:["Projects"]}),l.a.createElement(K,null))}}]),t}(n.Component),H=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(U,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},G=a(273),$=a.n(G);f.a.defaults.withCredentials=!0;var J=window.$,Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).cancel=a.cancel.bind(Object(p.a)(a)),a.state={error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){J("#modal_removetask").modal({dismissible:!1})}},{key:"cancel",value:function(){this.props.cancel(),J("#modal_removetask").modal("close")}},{key:"render",value:function(){return l.a.createElement("div",{id:"modal_removetask",className:"modal"},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Remove task")),l.a.createElement("form",{className:"col s12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h5",{className:"rezbuild-text"},"Do you want to remove ",l.a.createElement("strong",{style:{fontWeight:"900"}},this.props.task.name)," ?")),l.a.createElement("div",{className:"input-field col s6 right-align"},l.a.createElement("a",{className:"btn waves-effect waves-light",href:"#!"},"YES",l.a.createElement("i",{className:"material-icons right"},"check"))),l.a.createElement("div",{className:"input-field col s6 left-align"},l.a.createElement("a",{className:"btn waves-effect waves-light white rezbuild-text",href:"#!",onClick:this.cancel},l.a.createElement("i",{className:"material-icons left"},"clear"),"NO")),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"")))}}]),t}(n.Component),Q=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Y,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},X=a(77),Z=(a(109),window.$),ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(a)),a.state={pending:!1,error:!1,lane:a.props.task?a.props.task.lane:"lane_backlog",id:a.props.task?"_"+a.props.task._id:"",startDate:a.props.task?new Date(a.props.task.startDate):new Date,endDate:a.props.task?new Date(a.props.task.endDate):new Date},a.handleStartDateChange=a.handleStartDateChange.bind(Object(p.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleStartDateChange",value:function(e){this.setState({startDate:e})}},{key:"handleEndDateChange",value:function(e){this.setState({endDate:e})}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.props.task);else{var a={project:this.props.project._id,name:this.refs.name.value,lane:"lane_backlog",content:this.refs.content.value,roles:[].filter.call(this.refs.roles.options,function(e){return e.selected}).map(function(e){return e.value}),action:this.refs.action.value,names:_.a.ACTIONS[this.refs.action.value].names,values:_.a.ACTIONS[this.refs.action.value].values,formats:_.a.ACTIONS[this.refs.action.value].formats};this.setState({pending:!0,error:!1},function(){t.props.socket.emit("/api/task/create",a,function(e){e.tasks&&t.setState({pending:!1,error:!1},function(){Z("#modal_createtask"+t.state.id).modal("close"),t.props.socket.emit("/api/task/done")}),e.error&&t.setState({pending:!1,error:e.error})})})}}},{key:"componentWillUnmount",value:function(){Z("#modal_createtask"+this.state.id).modal("close")}},{key:"componentDidMount",value:function(){var e=this;Z(document).ready(function(){Z("#modal_createtask"+e.state.id).modal({dismissible:!1}),Z("ul.tabs").tabs(),Z("select").material_select(),Z("#modal_createtask"+e.state.id).modal({dismissible:!1})})}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e,t=this;return e=l.a.createElement("div",null,l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},this.state.id?"Update Task":"Create Task")),l.a.createElement("div",{className:"modal-content",style:{paddingTop:0}},l.a.createElement("form",{className:"col s12",onSubmit:this.submit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"input_name"+this.state.id,type:"text",ref:"name",defaultValue:this.props.task?this.props.task.name:"",required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_name"+this.state.id},"Name"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("textarea",{id:"input_content"+this.state.id,ref:"content",className:"materialize-textarea",defaultValue:this.props.task?this.props.task.content:"",required:!0}),l.a.createElement("label",{className:"active",htmlFor:"input_content"+this.state.id},"Content"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{multiple:!0,required:!0,defaultValue:["Customer"],id:"select_roles"+this.state.id,ref:"roles"},l.a.createElement("option",{value:"",disabled:!0},"Choose role(s)"),l.a.createElement("option",{name:"roles",value:"Customer",id:"role_customer"},"Customer"),l.a.createElement("option",{name:"roles",value:"Designer",id:"role_designer"},"Designer"),l.a.createElement("option",{name:"roles",value:"Analyst",id:"role_analyst"},"Analyst")),l.a.createElement("label",null,"Authorized Role(s)")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{required:!0,defaultValue:_.a.ACTIONS.NEW_MODEL_ASIS,id:"select_actions"+this.state.id,ref:"action"},l.a.createElement("option",{value:"",disabled:!0},"Choose action(s)"),Object.entries(_.a.ACTIONS).map(function(e){var t=Object(N.a)(e,2),a=t[0];t[1];return l.a.createElement("option",{name:"actions",value:a,key:a},a)})),l.a.createElement("label",null,"Authorized Action(s)"))),"lane_todo"===this.state.lane||"lane_inprogress"===this.state.lane?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s3"},l.a.createElement("label",{className:"active"},"From date"),l.a.createElement(X.a,{selected:this.state.startDate,selectsStart:!0,maxDate:this.state.endDate,startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleStartDateChange})),l.a.createElement("div",{className:"input-field col s3"},l.a.createElement("label",{className:"active"},"To date"),l.a.createElement(X.a,{selected:this.state.endDate,selectsEnd:!0,minDate:this.state.startDate,startDate:this.state.startDate,endDate:this.state.endDate,onChange:this.handleEndDateChange}))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"",this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},l.a.createElement("i",{className:"material-icons right"},"send"),"SUBMIT")),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild-text white",href:"#!",onClick:function(){return Z("#modal_createtask"+t.state.id).modal("close")}},l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL")))))),l.a.createElement("div",{id:"modal_createtask"+this.state.id,className:"modal"},e)}}]),t}(n.Component),te=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(ee,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},ae=window.$,ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onIn=a.onIn.bind(Object(p.a)(a)),a.onOut=a.onOut.bind(Object(p.a)(a)),a.state={hover:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onIn",value:function(){this.setState({hover:!0}),ae("#content_"+this.props.id).css("opacity","1"),ae("#content_"+this.props.id).css("max-height","15em")}},{key:"onOut",value:function(){this.setState({hover:!1}),ae("#content_"+this.props.id).css("transition","max-height 0.5s ease-out, opacity 0.5s ease-out"),ae("#content_"+this.props.id).css("opacity","0"),ae("#content_"+this.props.id).css("max-height","0"),ae("#content_"+this.props.id).css("overflow","hidden")}},{key:"componentDidUpdate",value:function(){ae(".rXSjd").css("min-width","4em"),ae("#textarea_"+this.props.id).trigger("autoresize")}},{key:"render",value:function(){return l.a.createElement("div",{className:"section hoverable",onMouseOver:this.props.draggable?this.onIn:null,onMouseOut:this.props.draggable?this.onOut:null,style:{minWidth:"15em",width:"15em",maxWidth:"15em",color:"#000",backgroundColor:"#fff",fontFamily:"Exo 2",textShadow:"-1px -1px 0 #fff, 1px -1px 0 #fff,  -1px 1px 0 #fff, 1px 1px 0 #fff",borderStyle:this.props.dashed?"dashed":"solid",borderColor:this.props.focused?"#f7931e":"#fff",borderWidth:this.props.focused?"4px":"0px",opacity:this.props.draggable?"1":"0.5",padding:"0",marginBottom:"10px"}},l.a.createElement("div",{className:"row",style:{marginBottom:"0px"}},l.a.createElement("div",{className:"col s6 left-align"},l.a.createElement("h6",{className:"black-text"},l.a.createElement("b",null,this.props.name))),l.a.createElement("div",{className:"col s6 right-align"},l.a.createElement("h6",{className:"black-text"},l.a.createElement("i",null,this.props.roles.map(function(e){return e[0]}).join()))),this.props.userDetails?l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"black-text"},l.a.createElement("b",null,"@"),this.props.userDetails.firstname+" "+this.props.userDetails.lastname)):"","lane_todo"===this.props.lane||"lane_inprogress"===this.props.lane?l.a.createElement("div",{className:"row",style:{marginBottom:"0px"}},l.a.createElement("div",{className:"col s5 center"},l.a.createElement("h6",{className:"black-text"},new Date(this.props.startDate).toLocaleDateString("en-US"))),l.a.createElement("div",{className:"col s2 center"},l.a.createElement("i",{className:"material-icons black-text"},"arrow_forward")),l.a.createElement("div",{className:"col s5 center"},l.a.createElement("h6",{className:"black-text"},new Date(this.props.endDate).toLocaleDateString("en-US")))):"",l.a.createElement("div",{className:"col s12 center",id:"content_"+this.props.id,style:{transition:"max-height 0.5s ease-out, opacity 0.5s ease-out",opacity:"0",maxHeight:"0",overflow:"hidden"}},l.a.createElement("div",{className:"col s12"},l.a.createElement("textarea",{style:{pointerEvents:"none"},id:"textarea_"+this.props.id,className:"materialize-textarea black-text",defaultValue:this.props.content})),l.a.createElement("div",{className:"chip white-text grey lighten-4",style:{textShadow:"-2px -2px 2px #f7931e, 2px -2px 2px #f7931e,  -2px 2px 2px #f7931e, 2px 2px 2px #f7931e"}},l.a.createElement("b",null,this.props.action))),l.a.createElement("div",{className:"col s12"},"lane_done"===this.props.lane?l.a.createElement("h6",{className:"black-text"},new Date(this.props.date).toLocaleString("en-US")):"")),l.a.createElement(Q,{task:this.props}),l.a.createElement(te,{task:this.props}))}}]),t}(n.Component);f.a.defaults.withCredentials=!0;var le=window.$,re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.state={error:!1,pending:!1,startDate:a.props.task.startDate,endDate:a.props.task.endDate},a.handleStartDateChange=a.handleStartDateChange.bind(Object(p.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleStartDateChange",value:function(e){this.setState({startDate:e})}},{key:"handleEndDateChange",value:function(e){this.setState({endDate:e})}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e=[];!function e(a,n){n.push(a),t.props.tasks.filter(function(e){return e._id===a})[0].next.map(function(t){return e(t,n)})}(t.props.task._id,e);var a={_id:{$in:e}};t.props.socket.emit("/api/task/delete",a,function(e){if(e.tasks){var a={_id:{$in:t.props.task.prev}},n={$pull:{next:t.props.task._id}};t.props.socket.emit("/api/task/update",a,n,function(e){e.tasks&&t.setState({pending:!1,error:!1},function(){le("#modal_backlogtask").modal("close"),t.props.socket.emit("/api/task/done")}),e.error&&t.setState({pending:!1,error:e.error})})}e.error&&t.setState({pending:!1,error:e.error})})})}},{key:"cancel",value:function(){this.props.cancel(),le("#modal_backlogtask").modal("close")}},{key:"componentDidMount",value:function(){le(document).ready(function(){le("#modal_backlogtask").modal(),le("select").material_select()})}},{key:"render",value:function(){var e,t;return this.props.task&&(e=l.a.createElement("div",null,l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h5",{className:"rezbuild-text"},"Do you want to remove ",l.a.createElement("strong",{style:{fontWeight:"900"}},this.props.task.name)," ?"))),t=l.a.createElement("div",null,l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},this.props.task.name)),l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{className:"col s12"},l.a.createElement("div",{className:"row"},e),l.a.createElement("div",{className:"row",style:{marginTop:"250px"}},l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light",href:"#!",onClick:this.submit},l.a.createElement("i",{className:"material-icons right"},"send"),"SUBMIT")),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild-text white",href:"#!",onClick:this.cancel},l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL"))))))),l.a.createElement("div",{id:"modal_backlogtask",className:"modal",style:{minHeight:"500px"}},t)}}]),t}(n.Component),se=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(re,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},ie=a(45);f.a.defaults.withCredentials=!0;var oe=window.$,ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.state={error:!1,pending:!1,startDate:a.props.task.startDate,endDate:a.props.task.endDate},a.handleStartDateChange=a.handleStartDateChange.bind(Object(p.a)(a)),a.handleEndDateChange=a.handleEndDateChange.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleStartDateChange",value:function(e){this.setState({startDate:e})}},{key:"handleEndDateChange",value:function(e){this.setState({endDate:e})}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={project:t.props.task.project,lane:"lane_todo",name:t.props.task.name,content:t.props.task.content,startDate:t.state.startDate,endDate:t.state.endDate,roles:t.props.task.roles,action:t.props.task.action,names:t.props.task.names,formats:t.props.task.formats,values:t.props.task.values,files:t.props.task.files,prev:[t.props.selectedTask._id],next:[]};t.refs.user.value&&(e.user=t.refs.user.value),t.props.socket.emit("/api/task/create",e,function(a){if(a.tasks){var n={_id:t.props.selectedTask._id},l={$push:{next:a.tasks._id}},r=a.tasks;t.props.socket.emit("/api/task/update",n,l,function(a){a.tasks&&(e.user?t.props.socket.emit("/api/user/get",{_id:e.user},function(e){e.users&&t.props.socket.emit("/api/email/send",{user:e.users[0],task:r,project:t.props.project},function(e){t.setState({pending:!1,error:!1},function(){oe("#modal_todotask").modal("close"),t.props.socket.emit("/api/task/done")})})}):t.setState({pending:!1,error:!1},function(){oe("#modal_todotask").modal("close"),t.props.socket.emit("/api/task/done")})),a.error&&t.setState({pending:!1,error:a.error})})}a.error&&t.setState({pending:!1,error:a.error})})})}},{key:"cancel",value:function(){this.props.cancel(),oe("#modal_todotask").modal("close")}},{key:"componentDidMount",value:function(){oe(document).ready(function(){oe("#modal_todotask").modal({dismissible:!1}),oe("select").material_select()})}},{key:"render",value:function(){var e,t,a=this;return this.props.task&&(e=l.a.createElement("div",null,l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{defaultValue:"",id:"user",ref:"user"},l.a.createElement("option",{value:""}),this.props.users.filter(function(e){var t;return(t=e.roles).includes.apply(t,Object(ie.a)(a.props.task.roles))}).map(function(e,t){return l.a.createElement("option",{name:"user",value:e._id,key:t},e.firstname+" "+e.lastname+" ("+e.email+")")})),l.a.createElement("label",null,"Assign a user")),l.a.createElement("div",{className:"input-field col s3"},l.a.createElement("label",{className:"active"},"From date"),l.a.createElement(X.a,{selected:new Date(this.state.startDate),selectsStart:!0,maxDate:new Date(this.state.endDate),startDate:new Date(this.state.startDate),endDate:new Date(this.state.endDate),onChange:this.handleStartDateChange})),l.a.createElement("div",{className:"input-field col s3"},l.a.createElement("label",{className:"active"},"To date"),l.a.createElement(X.a,{selected:new Date(this.state.endDate),selectsEnd:!0,minDate:new Date(this.state.startDate),startDate:new Date(this.state.startDate),endDate:new Date(this.state.endDate),onChange:this.handleEndDateChange}))),t=l.a.createElement("div",null,l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},this.props.task.name)),l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{className:"col s12"},l.a.createElement("div",{className:"row"},e),l.a.createElement("div",{className:"row",style:{marginTop:"250px"}},l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light",href:"#!",onClick:this.submit},l.a.createElement("i",{className:"material-icons right"},"send"),"SUBMIT")),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild-text white",href:"#!",onClick:this.cancel},l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL"))))))),l.a.createElement("div",{id:"modal_todotask",className:"modal",style:{minHeight:"500px"}},t)}}]),t}(n.Component),me=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(ce,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},de=a(178),ue=a.n(de);f.a.defaults.withCredentials=!0;var pe=window.$,he=[],fe=[],Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).generateForm=function(e,t,a){var n,r;switch(_.a.ACTIONS[e.action].typeValues[a]){case Number:return n=_.a.ACTIONS[e.action].minValues[a],r=_.a.ACTIONS[e.action].maxValues[a],l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{required:!0,id:"values_"+e._id+"_"+t,key:"values_"+e._id+"_"+t,ref:"values_"+e._id+"_"+t,type:"number",step:"any",className:"validate",min:n>r?r:n,max:r>n?r:n,defaultValue:e.values[a]}),l.a.createElement("label",{className:"active",htmlFor:"values_"+e._id+"_"+t},t," (",n,"-",r,e.formats[a],")"));case Boolean:return n=_.a.ACTIONS[e.action].minValues[a],r=_.a.ACTIONS[e.action].maxValues[a],l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{required:!0,id:"values_"+e._id+"_"+t,key:"values_"+e._id+"_"+t,ref:"values_"+e._id+"_"+t,defaultValue:Number(e.values[a])},l.a.createElement("option",{value:Number(n),id:"values_"+e._id+"_"+t},"False"),l.a.createElement("option",{value:Number(r),id:"values_"+e._id+"_"+t},"True")),l.a.createElement("label",{className:"active",htmlFor:"values_"+e._id+"_"+t},t," (",n,"-",r,e.formats[a],")"));case Object:return l.a.createElement("div",{className:"file-field input-field col s6",style:{marginTop:"0"}},l.a.createElement("h6",{className:"grey-text"},t),l.a.createElement("div",{className:"btn rezbuild col s1"},l.a.createElement("i",{className:"material-icons white-text"},"cloud_upload"),l.a.createElement("input",{required:!0,type:"file",id:"values_"+e._id+"_"+t,key:"values_"+e._id+"_"+t,ref:"values_"+e._id+"_"+t,defaultValue:"",accept:e.formats[a]})),l.a.createElement("div",{className:"file-path-wrapper col s11"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload "+t})));default:return}},a.submit=a.submit.bind(Object(p.a)(a)),a.cancel=a.cancel.bind(Object(p.a)(a)),a.state={newTaskId:!1,error:!1,pending:!1,progress:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({newTaskId:this.props.task._id,pending:!0,error:!1,progress:0},function(){if("lane_todo"===t.props.task.lane){var e={_id:t.props.task._id},a={user:"token",lane:"lane_done",names:[],values:[],files:[]};he=[],fe=[],t.props.task.names.forEach(function(e,n){var l="values_"+t.props.task._id+"_"+e,r="files_"+t.props.task._id+"_"+e;a.names.push(e);var s=t.refs[l].files?t.refs[l].files[0].name:t.refs[l].value;a.values.push(s);var i="";t.refs[r].files.length&&(he.push(t.refs[r].files[0]),i=ue()(t.refs[r].files[0].name)),a.files.push(i),t.refs[l].files&&t.refs[l].files.length&&he.push(t.refs[l].files[0])}),t.props.uploader.submitFiles(he),t.props.socket.emit("/api/task/update",e,a,function(e){e.tasks&&t.setState({pending:!1,error:!1},function(){fe.length>=he.length&&(pe("#modal_donetask_form").trigger("reset"),pe("#modal_donetask").modal("close"),t.props.socket.emit("/api/task/done"))}),e.error&&t.setState({pending:!1,error:e.error})})}if("lane_backlog"===t.props.task.lane){var n={project:t.props.task.project,lane:"lane_done",name:t.props.task.name,content:t.props.task.content,startDate:t.props.task.startDate,endDate:t.props.task.endDate,date:new Date,user:"token",roles:t.props.task.roles,action:t.props.task.action,names:t.props.task.names,values:t.props.task.values,formats:t.props.task.formats,files:t.props.task.files,prev:[t.props.selectedTask._id],next:[]};t.props.socket.emit("/api/task/create",n,function(e){e.tasks&&t.setState({newTaskId:e.tasks._id},function(){var e={_id:t.state.newTaskId},a={names:[],values:[],files:[]};he=[],fe=[],t.props.task.names.forEach(function(e,n){var l="values_"+t.props.task._id+"_"+e,r="files_"+t.props.task._id+"_"+e;a.names.push(e);var s=t.refs[l].files?t.refs[l].files[0].name:t.refs[l].value;a.values.push(s);var i="";t.refs[r].files.length&&(he.push(t.refs[r].files[0]),i=ue()(t.refs[r].files[0].name)),a.files.push(i),t.refs[l].files&&t.refs[l].files.length&&he.push(t.refs[l].files[0])}),t.props.uploader.submitFiles(he),t.props.socket.emit("/api/task/update",e,a,function(e){if(e.tasks){var a={_id:t.props.selectedTask._id},n={$push:{next:t.state.newTaskId}};t.props.socket.emit("/api/task/update",a,n,function(e){e.tasks&&t.setState({pending:!1,error:!1},function(){fe.length>=he.length&&(pe("#modal_donetask_form").trigger("reset"),pe("#modal_donetask").modal("close"),t.props.socket.emit("/api/task/done"))}),e.error&&t.setState({pending:!1,error:e.error})})}e.error&&t.setState({pending:!1,error:e.error})})}),e.error&&t.setState({pending:!1,error:e.error})})}})}},{key:"cancel",value:function(){this.props.cancel(),pe("#modal_donetask").modal("close")}},{key:"componentDidMount",value:function(){var e=this;this.props.uploader.addEventListener("start",function(t){t.file.meta.taskId=e.state.newTaskId,e.setState({progress:0},function(){})}),pe(document).ready(function(){pe("#modal_donetask").modal({dismissible:!1}),e.props.uploader.addEventListener("progress",function(t){e.setState({progress:(t.bytesLoaded/t.file.size*100).toFixed(0)},function(){})}),e.props.uploader.addEventListener("complete",function(t){e.setState({progress:0},function(){fe.push(t.file),fe.length>=he.length&&(pe("#modal_donetask_form").trigger("reset"),pe("#modal_donetask").modal("close"),e.props.socket.emit("/api/task/done"))})})})}},{key:"componentWillUnmount",value:function(){this.props.uploader.removeEventListener("start"),this.props.uploader.removeEventListener("progress"),this.props.uploader.removeEventListener("complete")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"modal_donetask",className:"modal",style:{minHeight:"500px"}},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Actions to complete ",l.a.createElement("b",null,this.props.task.name))),l.a.createElement("div",{className:"modal-content",style:{padding:0}},l.a.createElement("form",{className:"col s12",onSubmit:this.submit,id:"modal_donetask_form"},l.a.createElement("div",{className:"row"},this.props.task.names.map(function(t,a){return l.a.createElement("div",{className:"row",key:a},e.generateForm(e.props.task,t,a),l.a.createElement("div",{className:"file-field input-field col s6",style:{marginTop:"0"}},l.a.createElement("h6",{className:"grey-text"},"Attached file"),l.a.createElement("div",{className:"btn rezbuild col s1"},l.a.createElement("i",{className:"material-icons white-text"},"cloud_upload"),l.a.createElement("input",{type:"file",id:"files_"+e.props.task._id+"_"+t,key:"files_"+e.props.task._id+"_"+t,ref:"files_"+e.props.task._id+"_"+t,defaultValue:""})),l.a.createElement("div",{className:"file-path-wrapper col s11"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload attached file"}))))})),this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"",this.state.progress?l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"determinate",style:{width:this.state.progress+"%"}})):l.a.createElement("div",{className:"row",style:{marginTop:"250px"}},l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",href:"#!",type:"submit",id:"button_submit_task_done"},l.a.createElement("i",{className:"material-icons right"},"send"),"SUBMIT")),l.a.createElement("div",{className:"input-field col s6 center"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild-text white",href:"#!",onClick:this.cancel},l.a.createElement("i",{className:"material-icons left"},"cancel"),"CANCEL"))))))}}]),t}(n.Component),ve=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Ee,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},ge=window.$,be={minWidth:"15em",width:"15em",maxWidth:"15em",marginBottom:"10px",color:"#000",backgroundColor:"#fff",padding:"0",fontFamily:"Exo 2",textShadow:"-1px -1px 0 #fff, 1px -1px 0 #fff,  -1px 1px 0 #fff, 1px 1px 0 #fff"},Ne={minWidth:"18em",width:"18em",maxWidth:"18em",maxHeight:"100%",color:"#fff",backgroundColor:"rgba(247,147,30, .5)",fontFamily:"Exo 2",textShadow:"-2px -2px 2px #f7931e, 2px -2px 2px #f7931e,  -2px 2px 2px #f7931e, 2px 2px 2px #f7931e"},ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={eventBus:null,data:null},a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.onTaskChange=a.onTaskChange.bind(Object(p.a)(a)),a.onCardClick=a.onCardClick.bind(Object(p.a)(a)),a.setEventBus=a.setEventBus.bind(Object(p.a)(a)),a.eventBus=null,a.cancel=a.cancel.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"setEventBus",value:function(e){this.setState({eventBus:e})}},{key:"onTaskChange",value:function(e){this.setState({data:e})}},{key:"onCardClick",value:function(e,t,a){}},{key:"handleDragEnd",value:function(e,t,a,n,l){var r=this,s={type:"MOVE_CARD",fromLaneId:a,toLaneId:t,cardId:e,index:0};if(l.draggable){if("lane_backlog"===t){if("lane_todo"===a)return void this.setState({cancel:s,task:l},function(){return ge("#modal_todotask").modal("open")});if("lane_done"===a)return void this.setState({cancel:s,task:l},function(){return ge("#modal_donetask").modal("open")})}if("lane_todo"===t){if("lane_backlog"===a)return void this.setState({cancel:s,task:l},function(){return ge("#modal_backlogtask").modal("open")});if("lane_done"===a)return void this.setState({cancel:s,task:l},function(){return ge("#modal_donetask").modal("open")})}if("lane_done"===t){if("lane_todo"===a)return void this.setState({cancel:null,task:null},function(){return r.state.eventBus.publish(s)});if("lane_backlog"===a)return void this.setState({cancel:s,task:l},function(){return ge("#modal_backlogtask").modal("open")})}}this.setState({cancel:null,task:null},function(){r.state.eventBus.publish(s)})}},{key:"cancel",value:function(){this.state.eventBus.publish(this.state.cancel)}},{key:"componentDidMount",value:function(){this.update(),ge(".tooltipped").tooltip({delay:0,html:!0})}},{key:"componentWillUnount",value:function(){ge(".tooltipped").tooltip("remove")}},{key:"update",value:function(){var e=this,t=this.props.tasks.filter(function(e){return"INIT"!==e.action}),a=function(e){return Object.keys(_.a.ROLES).filter(function(t,a){return _.a.ROLES[t].actions.filter(function(t){return t===e.action}).length>0})},n=t.filter(function(e){return"lane_done"===e.lane}).map(function(t){if(t.id=t._id,t.draggable=!1,t.focused=!1,t.dashed=!1,t.userDetails=t.user?e.props.users.filter(function(e){return e._id===t.user})[0]:"",t.style=be,t.roles=a(t),e.props.task){var n=[];!function t(a,n){n.push(a),e.props.tasks.filter(function(e){return e._id===a})[0].prev.forEach(function(e){return t(e,n)})}(e.props.task._id,n),t.draggable=n.includes(t._id),t.focused=e.props.task._id===t._id}return t}),l=t.filter(function(e){return"lane_todo"===e.lane}).map(function(t){if(t.id=t._id,t.draggable=!1,t.focused=!1,t.dashed=!1,t.userDetails=t.user?e.props.users.filter(function(e){return e._id===t.user})[0]:"",t.style=be,t.roles=a(t),e.props.task){var n=[];!function t(a,n){n.push(a),e.props.tasks.filter(function(e){return e._id===a})[0].prev.forEach(function(e){return t(e,n)})}(e.props.task._id,n),t.draggable=n.includes(t._id),t.focused=t.dashed=e.props.task._id===t._id}return t}),r={lanes:[{id:"lane_backlog",title:"BACKLOG",label:"?/?",cards:t.filter(function(e){return"lane_backlog"===e.lane}).map(function(t){if(t.id=t._id,t.draggable=!1,t.focused=!1,t.dashed=!1,t.userDetails=t.user?e.props.users.filter(function(e){return e._id===t.user})[0]:"",t.style=be,t.roles=a(t),e.props.task){!function t(a,n){n.push(a),e.props.tasks.filter(function(e){return e._id===a})[0].prev.forEach(function(e){return t(e,n)})}(e.props.task._id,[]);var n=!l.filter(function(e){return!0===e.draggable}).length,r=e.props.user.roles.filter(function(e){return _.a.ROLES.hasOwnProperty(e)}).map(function(e){return _.a.ROLES[e].actions}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e===t.action}).length>0;if(n&&_.a.STATUS[e.props.task.action].includes(t.action)&&r&&(t.draggable=!0,e.props.task.action.includes("MODEL")&&t.action.includes("KPI"))){var s=e.props.task.next.map(function(t){return e.props.tasks.filter(function(e){return e._id===t})[0]});if(s.length>0)s.filter(function(e){return e.action===t.action}).length>0&&(t.draggable=!1)}}return t}),style:Ne},{id:"lane_todo",title:"TODO",label:"?/?",cards:l,style:Ne},{id:"lane_done",title:"DONE",label:"?/?",cards:n,style:Ne}]};this.setState({data:r})}},{key:"componentDidUpdate",value:function(e,t){e.tasks!==this.props.tasks&&this.update(),e.task!==this.props.task&&this.update(),ge("#modal_task").modal({dismissible:!1}),ge("#modal_createtask").modal({dismissible:!0})}},{key:"render",value:function(){var e,t,a,n,r,s;if(this.props.tasks.length>0){if(this.state.data){var i={Card:ne,laneDraggable:!1};e=l.a.createElement($.a,{data:this.state.data,eventBusHandle:this.setEventBus,onDataChange:this.onTaskChange,handleDragEnd:this.handleDragEnd,onCardClick:this.onCardClick,cardStyle:be,components:i,style:{backgroundColor:"transparent",fontFamily:"Exo 2",padding:"0"}})}this.state.task&&this.state.cancel&&this.props.project&&(t=l.a.createElement(se,{setTask:this.props.setTask,selectedTask:this.props.task,tasks:this.props.tasks,task:this.state.task,users:this.props.users,event:this.state.cancel,cancel:this.cancel}),a=l.a.createElement(me,{project:this.props.project,selectedTask:this.props.task,task:this.state.task,users:this.props.users,event:this.state.cancel,cancel:this.cancel}),n=l.a.createElement(ve,{selectedTask:this.props.task,task:this.state.task,event:this.state.cancel,cancel:this.cancel})),s=l.a.createElement("a",{className:"waves-effect waves-light btn modal-trigger",href:"#modal_createtask"},l.a.createElement("i",{className:"material-icons left"},"add")," NEW"),r=l.a.createElement(te,{project:this.props.project})}return l.a.createElement("div",null,s,r,e,t,a,n)}}]),t}(n.Component),_e=a(61),ye=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(0===this.props.data.length)return l.a.createElement("div",null);var t=Math.round(100),a=Object.keys(this.props.data[0]).filter(function(e){return"indicator"!==e});return l.a.createElement(_e.f,{outerRadius:t,data:this.props.data,width:this.props.parentWidth,height:300,margin:{top:0,right:5,bottom:0,left:5}},l.a.createElement(_e.c,null),l.a.createElement(_e.b,{dataKey:"indicator",fontSize:"10px",position:"center"}),l.a.createElement(_e.d,{angle:90,domain:[0,1],fontSize:"10px"}),a.map(function(t){return l.a.createElement(_e.e,{isAnimationActive:!1,name:t,dataKey:t,stroke:"#f7931e",strokeWidth:2,fill:"#f7931e",fillOpacity:e.props.highlightedTask._id===t?.6:.3,strokeOpacity:e.props.highlightedTask._id===t?1:.5,fontSize:"10px",dot:{fill:"white",stroke:"#f7931e",strokeWidth:2,fillOpacity:e.props.highlightedTask._id===t?1:.5},key:t},l.a.createElement(_e.a,{isAnimationActive:!1,dataKey:t,position:"top",paintOrder:"stroke",fill:"#f7931e",stroke:"white",strokeWidth:2,strokeLinecap:"butt",strokeLinejoin:"miter",fontSize:"10px",fontWeight:"bold",strokeOpacity:e.props.highlightedTask._id===t?.6:.3,fillOpacity:e.props.highlightedTask._id===t?1:.5}))}))}}]),t}(n.Component),we=a(76),je=a.n(we),Oe=a(51),xe=a(89),Se=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"computeScoreOfRelevantTask",value:function(t){for(var a=[],n={category:"ECONOMICAL",data:[]},l={category:"ENERGY",data:[]},r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.forEach(function(a){var r=e.fetchRelevantTasks(a,t);if(r.economicalTask)for(var s=0;s<r.economicalTask.names.length;s++)_.a.ACTIONS[r.economicalTask.action].priorities[s]&&function(){var e=r.economicalTask.names[s],t=_.a.ACTIONS[r.economicalTask.action].minValues[s],l=_.a.ACTIONS[r.economicalTask.action].maxValues[s],i=(r.economicalTask.values[s]-t)/(l-t),o=Object(xe.a)({indicator:e},a._id,i.toFixed(2));n.data.filter(function(t){return t.indicator===e}).length>0?n.data=n.data.map(function(e){return e.indicator===o.indicator?Object(Oe.a)({},e,o):e}):n.data.push(o)}();if(r.energicalTask)for(var i=0;i<r.energicalTask.names.length;i++)_.a.ACTIONS[r.energicalTask.action].priorities[i]&&function(){var e=r.energicalTask.names[i],t=_.a.ACTIONS[r.energicalTask.action].minValues[i],n=_.a.ACTIONS[r.energicalTask.action].maxValues[i],s=(r.energicalTask.values[i]-t)/(n-t),o=Object(xe.a)({indicator:e},a._id,s.toFixed(2));l.data.filter(function(t){return t.indicator===e}).length>0?l.data=l.data.map(function(e){return e.indicator===o.indicator?Object(Oe.a)({},e,o):e}):l.data.push(o)}()}),a.push(n),a.push(l),a}}]),e}();Se.getFirstParentTaskWithAction=function(e,t,a){var n=e.filter(function(e){return e._id===t})[0].prev.map(function(t){return e.filter(function(e){return e._id===t})[0]});if(n.length>0){var l=n.filter(function(e){return e.action.includes(a)&&"lane_todo"!==e.lane});return l.length>0?l[0]:Se.getFirstParentTaskWithAction(e,n[0]._id,a)}return null},Se.getLastChildTaskWithAction=function(e,t,a){var n=e.filter(function(e){return e._id===t})[0].next.map(function(t){return e.filter(function(e){return e._id===t})[0]}).filter(function(e){return e.action.includes(a)&&"lane_todo"!==e.lane});return n.length>0?n[0].next.length?Se.getLastChildTaskWithAction(e,n[0]._id,a):n[0]:null},Se.fetchRelevantTasks=function(e,t){if(e.action.includes("MODEL_ASIS")){var a="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"MODEL_ASIS")||e;return{modelTask:a,economicalTask:Se.getLastChildTaskWithAction(t,a._id,"KPI_ECONOMICAL_ASIS"),socialTask:Se.getLastChildTaskWithAction(t,a._id,"KPI_SOCIAL_ASIS"),energicalTask:Se.getLastChildTaskWithAction(t,a._id,"KPI_ENERGICAL_ASIS"),comfortTask:Se.getLastChildTaskWithAction(t,a._id,"KPI_COMFORT_ASIS"),error:!1,pending:!1}}if(e.action.includes("KPI_ECONOMICAL_ASIS")){var n="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_ECONOMICAL_ASIS")||e,l=Se.getFirstParentTaskWithAction(t,n._id,"MODEL_ASIS");return{modelTask:l,economicalTask:n,socialTask:Se.getLastChildTaskWithAction(t,l._id,"KPI_SOCIAL_ASIS"),energicalTask:Se.getLastChildTaskWithAction(t,l._id,"KPI_ENERGICAL_ASIS"),comfortTask:Se.getLastChildTaskWithAction(t,l._id,"KPI_COMFORT_ASIS"),error:!1,pending:!1}}if(e.action.includes("KPI_SOCIAL_ASIS")){var r="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_SOCIAL_ASIS")||e,s=Se.getFirstParentTaskWithAction(t,r._id,"MODEL_ASIS");return{modelTask:s,economicalTask:Se.getLastChildTaskWithAction(t,s._id,"KPI_ECONOMICAL_ASIS"),socialTask:r,energicalTask:Se.getLastChildTaskWithAction(t,s._id,"KPI_ENERGICAL_ASIS"),comfortTask:Se.getLastChildTaskWithAction(t,s._id,"KPI_COMFORT_ASIS"),error:!1,pending:!1}}if(e.action.includes("KPI_ENERGICAL_ASIS")){var i="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_ENERGICAL_ASIS")||e,o=Se.getFirstParentTaskWithAction(t,i._id,"MODEL_ASIS");return{modelTask:o,economicalTask:Se.getLastChildTaskWithAction(t,o._id,"KPI_ECONOMICAL_ASIS"),socialTask:Se.getLastChildTaskWithAction(t,o._id,"KPI_SOCIAL_ASIS"),energicalTask:i,comfortTask:Se.getLastChildTaskWithAction(t,o._id,"KPI_COMFORT_ASIS"),error:!1,pending:!1}}if(e.action.includes("KPI_COMFORT_ASIS")){var c="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_COMFORT_ASIS")||e,m=Se.getFirstParentTaskWithAction(t,c._id,"MODEL_ASIS");return{modelTask:m,economicalTask:Se.getLastChildTaskWithAction(t,m._id,"KPI_ECONOMICAL_ASIS"),socialTask:Se.getLastChildTaskWithAction(t,m._id,"KPI_SOCIAL_ASIS"),energicalTask:Se.getLastChildTaskWithAction(t,m._id,"KPI_ENERGICAL_ASIS"),comfortTask:c,error:!1,pending:!1}}if(e.action.includes("MODEL_TOBE")){var d="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"MODEL_TOBE")||e;return{modelTask:d,economicalTask:Se.getLastChildTaskWithAction(t,d._id,"KPI_ECONOMICAL_TOBE"),socialTask:Se.getLastChildTaskWithAction(t,d._id,"KPI_SOCIAL_TOBE"),energicalTask:Se.getLastChildTaskWithAction(t,d._id,"KPI_ENERGICAL_TOBE"),comfortTask:Se.getLastChildTaskWithAction(t,d._id,"KPI_COMFORT_TOBE"),error:!1,pending:!1}}if(e.action.includes("KPI_ECONOMICAL_TOBE")){var u="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_ECONOMICAL_TOBE")||e,p=Se.getFirstParentTaskWithAction(t,u._id,"MODEL_TOBE");return{modelTask:p,economicalTask:u,socialTask:Se.getLastChildTaskWithAction(t,p._id,"KPI_SOCIAL_TOBE"),energicalTask:Se.getLastChildTaskWithAction(t,p._id,"KPI_ENERGICAL_TOBE"),comfortTask:Se.getLastChildTaskWithAction(t,p._id,"KPI_COMFORT_TOBE"),error:!1,pending:!1}}if(e.action.includes("KPI_SOCIAL_TOBE")){var h="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_SOCIAL_TOBE")||e,f=Se.getFirstParentTaskWithAction(t,h._id,"MODEL_TOBE");return{modelTask:f,economicalTask:Se.getLastChildTaskWithAction(t,f._id,"KPI_ECONOMICAL_TOBE"),socialTask:h,energicalTask:Se.getLastChildTaskWithAction(t,f._id,"KPI_ENERGICAL_TOBE"),comfortTask:Se.getLastChildTaskWithAction(t,f._id,"KPI_COMFORT_TOBE"),error:!1,pending:!1}}if(e.action.includes("KPI_ENERGICAL_TOBE")){var E="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_ENERGICAL_TOBE")||e,v=Se.getFirstParentTaskWithAction(t,E._id,"MODEL_TOBE");return{modelTask:v,economicalTask:Se.getLastChildTaskWithAction(t,v._id,"KPI_ECONOMICAL_TOBE"),socialTask:Se.getLastChildTaskWithAction(t,v._id,"KPI_SOCIAL_TOBE"),energicalTask:E,comfortTask:Se.getLastChildTaskWithAction(t,v._id,"KPI_COMFORT_TOBE"),error:!1,pending:!1}}if(e.action.includes("KPI_COMFORT_TOBE")){var g="lane_todo"===e.lane&&Se.getFirstParentTaskWithAction(t,e._id,"KPI_COMFORT_TOBE")||e,b=Se.getFirstParentTaskWithAction(t,g._id,"MODEL_TOBE");return{modelTask:b,economicalTask:Se.getLastChildTaskWithAction(t,b._id,"KPI_ECONOMICAL_TOBE"),socialTask:Se.getLastChildTaskWithAction(t,b._id,"KPI_SOCIAL_TOBE"),energicalTask:Se.getLastChildTaskWithAction(t,b._id,"KPI_ENERGICAL_TOBE"),comfortTask:g,error:!1,pending:!1}}return{modelTask:null,economicalTask:null,socialTask:null,energicalTask:null,comfortTask:null,error:!1,pending:!0}};var Te=Se,Ce=a(124),Ae=window.$,Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).openFullscreen=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},a.state={modelMode:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){Ae(document).ready(function(){Ae(".tooltipped").tooltip({delay:0,html:!0})})}},{key:"componentDidUpdate",value:function(e,t){e.modelTask!==this.props.modelTask&&Ae(".tooltipped").tooltip({delay:0,html:!0})}},{key:"componentWillUnmount",value:function(){Ae(".tooltipped").tooltip("remove")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.props.modelTask&&this.props.modelTask.values.length&&""!==this.props.modelTask.values[0]?l.a.createElement("div",{style:{width:"auto",height:"315px",position:"relative"}},l.a.createElement("iframe",{title:"ASIS MODEL VIEWER",width:"100%",height:"100%",style:this.state.modelMode?{backgroundColor:"white",position:"fixed",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",border:"none",margin:0,padding:0,overflow:"hidden",zIndex:9999}:{backgroundColor:"white",position:"absolute",top:0,right:0,zIndex:"inherit"},src:window.location.protocol+"//"+this.props.host+"/Rezbuild/Visualize/"+this.props.modelTask._id+"_"+this.props.modelTask.values[0].split(".ifc")[0],frameBorder:"0",allowFullScreen:!0}),l.a.createElement("a",{className:"btn rezbuild right-align tooltipped","data-position":"left","data-tooltip":"Download",style:this.state.modelMode?{position:"fixed",top:"10px",right:"10px",zIndex:9999}:{position:"absolute",top:"10px",right:"10px",zIndex:"inherit"},href:window.location.protocol+"//"+this.props.host+"/"+this.props.modelTask._id+"/"+this.props.modelTask.values[0]},l.a.createElement("i",{className:" material-icons white-text"},"cloud_download")),this.props.allowFullScreen?l.a.createElement("button",{className:"btn rezbuild right-align tooltipped","data-position":"left","data-tooltip":this.state.modelMode?"Normalscreen":"Fullscreen",style:this.state.modelMode?{position:"fixed",bottom:"10px",right:"10px",zIndex:9999}:{position:"absolute",bottom:"10px",right:"10px",zIndex:"inherit"},onClick:function(t){t.preventDefault(),e.state.modelMode?Ae("html, body").css({overflow:"auto",height:"auto"}):Ae("html, body").css({overflow:"hidden",height:"100%"}),e.setState({modelMode:!e.state.modelMode})}},l.a.createElement("i",{className:" material-icons white-text"},this.state.modelMode?"fullscreen_exit":"fullscreen")):""):"")}}]),t}(n.Component),De=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Ie,Object.assign({},e,{host:t.host,socket:t.socket,uploader:t.uploader}))})},Le=window.$,Fe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){Le(document).ready(function(){Le(".tooltipped").tooltip({delay:0,html:!0})})}},{key:"componentDidUpdate",value:function(e,t){e.modelTask!==this.props.modelTask&&Le(".tooltipped").tooltip({delay:0,html:!0})}},{key:"componentWillUnmount",value:function(){Le(".tooltipped").tooltip("remove")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.props.modelTask&&this.props.modelTask.files.length&&""!==this.props.modelTask.files[0]?l.a.createElement("ul",{className:"collection black-text"},this.props.modelTask.files.map(function(t,a){return l.a.createElement("li",{className:"collection-item row valign-wrapper",value:t,key:a,style:{padding:"0px 10px"}},l.a.createElement("p",{className:"col s10"},t," "),l.a.createElement("a",{className:"btn rezbuild col s2 right-align tooltipped","data-position":"top","data-tooltip":"Download",href:window.location.protocol+"//"+e.props.host+"/"+e.props.modelTask._id+"/"+t},l.a.createElement("i",{className:"material-icons white-text"},"cloud_download")))})):"")}}]),t}(n.Component),Me=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Fe,Object.assign({},e,{host:t.host,socket:t.socket,uploader:t.uploader}))})},Pe=window.$,We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={modelTask:null,modelMode:!1,environmentalTask:null,environmentalMode:!1,economicalTask:null,economicalMode:!1,socialTask:null,socialMode:!1,energicalTask:null,energicalMode:!1,comfortTask:null,comfortMode:!1,error:!1,pending:!1},a.renderKPIsOfTask=a.renderKPIsOfTask.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"fetchFiles",value:function(){this.props.task&&this.setState(Te.fetchRelevantTasks(this.props.task,this.props.tasks))}},{key:"componentDidMount",value:function(){this.fetchFiles(),Pe(document).ready(function(){Pe(".tooltipped").tooltip({delay:0,html:!0})})}},{key:"componentDidUpdate",value:function(e,t){e.task!==this.props.task&&(this.fetchFiles(),Pe(".tooltipped").tooltip({delay:0,html:!0}))}},{key:"componentWillUnmount",value:function(){Pe(".tooltipped").tooltip("remove")}},{key:"renderKPIsOfTask",value:function(e){var t=this;return l.a.createElement("span",{className:"col s12"},e.names.map(function(a,n){return l.a.createElement("div",{key:n},l.a.createElement("div",{className:"col s10 left-align",style:{padding:0}},l.a.createElement("h6",{className:"black-text"},a),l.a.createElement("h6",null,e.values[n]+" "+e.formats[n])),e.files[n]?l.a.createElement("a",{className:"col s2 btn rezbuild right-align tooltipped secondary-content","data-position":"top","data-tooltip":"Download",style:{marginTop:"0.5rem"},href:window.location.protocol+"//"+t.props.host+"/"+e._id+"/"+e.files[n]},l.a.createElement("i",{className:"material-icons white-text"},"cloud_download")):"")}))}},{key:"render",value:function(){var e,t,a,n,r,s,i=this;this.state.economicalTask&&(t=this.renderKPIsOfTask(this.state.economicalTask)),this.state.energicalTask&&(s=this.renderKPIsOfTask(this.state.energicalTask)),this.state.socialTask&&(a=this.renderKPIsOfTask(this.state.socialTask)),this.state.environmentalTask&&(n=this.renderKPIsOfTask(this.state.environmentalTask)),this.state.comfortTask&&(r=this.renderKPIsOfTask(this.state.comfortTask));var o=Te.computeScoreOfRelevantTask(this.props.tasks,this.props.task);return e=l.a.createElement("div",{className:"col s12"},this.state.economicalTask?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"valign-wrapper col s12",style:{padding:0,paddingRight:"0.75rem",paddingBottom:"0.5rem"}},l.a.createElement("h6",{className:"rezbuild-text left-align col s10",style:{padding:0}},"ECONOMICAL"),l.a.createElement("button",{className:"btn-flat center col s2 waves-effect waves-light",onClick:function(e){e.preventDefault(),i.setState({economicalMode:!i.state.economicalMode})}},l.a.createElement("i",{className:"material-icons rezbuild-text"},this.state.economicalMode?"expand_less":"expand_more"))),this.state.economicalMode?t:""):"",this.state.environmentalTask?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"valign-wrapper col s12",style:{padding:0,paddingRight:"0.75rem",paddingBottom:"0.5rem"}},l.a.createElement("h6",{className:"rezbuild-text left-align col s10",style:{padding:0}},"ENVIRONMENTAL"),l.a.createElement("button",{className:"btn-flat center col s2 waves-effect waves-light",onClick:function(e){e.preventDefault(),i.setState({environmentalMode:!i.state.environmentalMode})}},l.a.createElement("i",{className:"material-icons rezbuild-text"},this.state.environmentalMode?"expand_less":"expand_more"))),this.state.environmentalMode?n:""):"",this.state.socialTask?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"valign-wrapper col s12",style:{padding:0,paddingRight:"0.75rem",paddingBottom:"0.5rem"}},l.a.createElement("h6",{className:"rezbuild-text left-align col s10",style:{padding:0}},"SOCIAL"),l.a.createElement("button",{className:"btn-flat center col s2 waves-effect waves-light",onClick:function(e){e.preventDefault(),i.setState({socialMode:!i.state.socialMode})}},l.a.createElement("i",{className:"material-icons rezbuild-text"},this.state.socialMode?"expand_less":"expand_more"))),this.state.socialMode?a:""):"",this.state.energicalTask?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"valign-wrapper col s12",style:{padding:0,paddingRight:"0.75rem",paddingBottom:"0.5rem"}},l.a.createElement("h6",{className:"rezbuild-text left-align col s10",style:{padding:0}},"ENERGY"),l.a.createElement("button",{className:"btn-flat center col s2 waves-effect waves-light",onClick:function(e){e.preventDefault(),i.setState({energicalMode:!i.state.energicalMode})}},l.a.createElement("i",{className:"material-icons rezbuild-text"},this.state.energicalMode?"expand_less":"expand_more"))),this.state.energicalMode?s:""):"",this.state.comfortTask?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"valign-wrapper col s12",style:{padding:0,paddingRight:"0.75rem",paddingBottom:"0.5rem"}},l.a.createElement("h6",{className:"rezbuild-text left-align col s10",style:{padding:0}},"COMFORT"),l.a.createElement("button",{className:"btn-flat center col s2 waves-effect waves-light",onClick:function(e){e.preventDefault(),i.setState({comfortMode:!i.state.comfortMode})}},l.a.createElement("i",{className:"material-icons rezbuild-text"},this.state.comfortMode?"expand_less":"expand_more"))),this.state.comfortMode?r:""):""),l.a.createElement("div",{className:"section white white-text z-depth-1",style:{paddingTop:0}},l.a.createElement("div",{className:"row",style:{marginBottom:0}},l.a.createElement("div",{className:"col s12 center rezbuild"},l.a.createElement("h6",{className:"white-text col s12",style:{marginBottom:"0.1rem"}},l.a.createElement("b",null,this.props.task.action)),l.a.createElement("br",null),l.a.createElement("h6",{className:"white-text col s12",style:{fontSize:"10px",marginTop:"0.1rem"}},je()(this.props.task.date).format("LLL"))),l.a.createElement("div",{className:"col s12 white grey-text"},l.a.createElement("div",{className:"col s6"},l.a.createElement("h6",null,"BIM MODEL"),l.a.createElement(De,{modelTask:this.state.modelTask,allowFullScreen:!0}),l.a.createElement("h6",null,"ATTACHED FILE"),l.a.createElement(Me,{modelTask:this.state.modelTask}),l.a.createElement("h6",null,"KPI DATA"),e),l.a.createElement("div",{className:"col s6"},l.a.createElement("h6",null,"KPI CHART"),o.map(function(e,t){return l.a.createElement(Ce.a,{key:t},function(t){return l.a.createElement("div",null,e.data&&e.data.length>0?l.a.createElement("h6",{className:"rezbuild-text col s12 center-align",style:{padding:0}},e.category," SCORE"):"",l.a.createElement(ye,{key:e.id+e.category,highlightedTask:i.props.task,data:e.data,parentWidth:t.width,parentTop:t.top,parentLeft:t.left,parentRef:t.ref,resizeParent:t.resize}))})})))))}}]),t}(n.Component),Ve=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(We,Object.assign({},e,{host:t.host,socket:t.socket,uploader:t.uploader}))})},Be=a(40),ze=window.$,Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).did=!1,a.state={height:0,width:0,selectedTasks:[],nodes:[],links:[]},a.countNodeAtDepthLevel=a.countNodeAtDepthLevel.bind(Object(p.a)(a)),a.countNodeByDepthLevel=a.countNodeByDepthLevel.bind(Object(p.a)(a)),a.getNodesAtDepthLevel=a.getNodesAtDepthLevel.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleClassName",value:function(e,t,a,n){var l=this,r=Be.d(ze("#svg-tree")[0]),s=0,i=0;"rectangle"===e&&(s=12,i=8),t?(r.selectAll(".link-"+e+",.symbol-"+e+",.label-"+e).transition().duration(n).attr("opacity",1),r.selectAll(".symbol-"+e).on("click",function(e,t,n){e.selected?a?l.props.removeTask(l.props.tasks.filter(function(t){return t._id===e.task._id})[0]):l.props.setTask(null):a?l.props.addTask(l.props.tasks.filter(function(t){return t._id===e.task._id})[0]):l.props.setTask(l.props.tasks.filter(function(t){return t._id===e.task._id})[0])}).on("mouseover",function(e,t){e.selected||Be.d(this).transition().attr("transform",function(e){return"translate("+(e.x-s)+","+(e.y-s)+") scale(1.5)"}).duration(150)}).on("mouseout",function(e,t){e.selected||Be.d(this).transition().attr("transform",function(e){return"translate("+(e.x-i)+","+(e.y-i)+")"}).duration(150)})):(r.selectAll(".link-"+e+",.symbol-"+e+",.label-"+e).transition().duration(n).attr("opacity",.5),r.selectAll(".symbol-"+e).on("click",null).on("mouseover",null).on("mouseout",null))}},{key:"toggleCompareMode",value:function(){this.handleClassName("init",!this.props.compareMode,this.props.compareMode,0),this.handleClassName("circle",!0,this.props.compareMode,0),this.handleClassName("rectangle",!0,this.props.compareMode,0),this.handleClassName("triangle",!this.props.compareMode,this.props.compareMode,150),this.props.setTask(null)}},{key:"countNodeAtDepthLevel",value:function(e,t){var a=this;if(t<=0)return 1;if(null!==e&&null!==e.next&&e.next.length>0){var n=[];return e.next.forEach(function(e){var l=a.props.tasks.filter(function(t){return t._id===e})[0];n.push(a.countNodeAtDepthLevel(l,t-1))}),n.reduce(function(e,t){return e+t},0)}return 0}},{key:"getNodesAtDepthLevel",value:function(e,t){var a=this;if(t<=0)return[e];if(null!==e&&null!==e.next&&e.next.length>0){var n=[];return e.next.forEach(function(e){var l=a.props.tasks.filter(function(t){return t._id===e})[0];n.push(a.getNodesAtDepthLevel(l,t-1))}),n.reduce(function(e,t){return[].concat(Object(ie.a)(e),Object(ie.a)(t))},[])}return[]}},{key:"countNodeByDepthLevel",value:function(e){for(var t=!1,a=0,n=[];!t;){var l=this.countNodeAtDepthLevel(e,a++);l?n.push(l):t=!0}return n}},{key:"update",value:function(){var e=this,t=this.props.tasks.filter(function(e){return"INIT"===e.action})[0],a=function t(a,n){var l=n;return a.next.length>0&&(l=a.next.map(function(a){return t(e.props.tasks.filter(function(e){return e._id===a})[0],n)}).reduce(function(e,t){return e+t},0)),l},n=a(t,40),l=function t(a,n,l){var r=l;return a.next.length>0?Math.max.apply(Math,Object(ie.a)(a.next.map(function(a){return t(e.props.tasks.filter(function(e){return e._id===a})[0],n,l+n)}))):r}(t,180,180);this.setState({height:n,width:l,selectedTasks:[],nodes:[],links:[]},function(){!function t(n,l,r,s,i){var o=!!e.props.selectedTasks.length&&e.props.selectedTasks.filter(function(e){return e._id===n._id}).length;s.push({task:n,x:l,y:r,selected:o});var c=l+180,m=r;n.next.map(function(t){return e.props.tasks.filter(function(e){return e._id===t})[0]}).sort(function(e,t){return e.action.includes("MODEL_ASIS")&&t.action.includes("MODEL_TOBE")||e.action.includes("MODEL_TOBE")&&t.action.includes("KPI")||e.action.includes("MODEL_ASIS")&&t.action.includes("KPI")?-1:t.action.includes("MODEL_ASIS")&&e.action.includes("MODEL_TOBE")||t.action.includes("MODEL_TOBE")&&e.action.includes("KPI")||t.action.includes("MODEL_ASIS")&&e.action.includes("KPI")?1:0}).forEach(function(e){var n=a(e,40);i.push({task:e,source:{x:l,y:r},target:{x:c,y:m},dashed:"lane_todo"===e.lane?"3, 3":"0, 0",color:"#f7931e"}),t(e,c,m,s,i),m+=n})}(t,15,15,e.state.nodes,e.state.links),e.draw()})}},{key:"draw",value:function(){var e=Be.d(ze("#svg-tree")[0]);e.selectAll("*").remove();var t=Be.c().x(function(e){return e.x}).y(function(e){return e.y}).curve(Be.a);e.append("g").selectAll("path").data(this.state.links).enter().append("path").attr("class",function(e){var t="";return e.task.action.includes("INIT")&&(t="link-init"),e.task.action.includes("KPI")&&(t="link-triangle"),e.task.action.includes("MODEL_ASIS")&&(t="link-circle"),e.task.action.includes("MODEL_TOBE")&&(t="link-rectangle"),t}).attr("d",function(e){return t([{x:e.source.x,y:e.source.y},{x:Be.b(e.source.x,e.target.x)(.2),y:Be.b(e.source.y,e.target.y)(.1)},{x:Be.b(e.source.x,e.target.x)(.8),y:Be.b(e.source.y,e.target.y)(.9)},{x:e.target.x,y:e.target.y}])}).attr("stroke",function(e){return e.color}).attr("stroke-width",2).style("stroke-dasharray",function(e){return e.dashed}).attr("fill","none"),e.append("g").selectAll("text").data(this.state.links).enter().append("text").attr("class",function(e){var t="";return e.task.action.includes("INIT")&&(t="link-init"),e.task.action.includes("KPI")&&(t="link-triangle"),e.task.action.includes("MODEL_ASIS")&&(t="link-circle"),e.task.action.includes("MODEL_TOBE")&&(t="link-rectangle"),t}).attr("x",function(e){return e.target.x-12-4}).attr("y",function(e){return e.target.y+3}).html(function(e){return e.task.name}).attr("fill","white").attr("text-anchor","end").attr("font-size","12px").attr("paint-order","stroke").attr("stroke","#f7931e").attr("stroke-width",4).attr("stroke-linecap","butt").attr("stroke-linejoin","miter").attr("font-weight","800"),e.append("g").selectAll("text").data(this.state.links).enter().append("text").attr("class",function(e){var t="";return e.task.action.includes("INIT")&&(t="link-init"),e.task.action.includes("KPI")&&(t="link-triangle"),e.task.action.includes("MODEL_ASIS")&&(t="link-circle"),e.task.action.includes("MODEL_TOBE")&&(t="link-rectangle"),t}).attr("x",function(e){return e.target.x-12-4}).attr("y",function(e){return e.target.y+12+4}).html(function(e){return je()(e.task.date).format("LLL")}).attr("fill","#f7931e").attr("text-anchor","end").attr("font-size","10px").attr("paint-order","stroke").attr("stroke","#fff").attr("stroke-width",2).attr("stroke-linecap","butt").attr("stroke-linejoin","miter").attr("font-weight","800"),e.append("g").selectAll("circle").data(this.state.nodes.filter(function(e){return e.task.action.includes("INIT")})).enter().append("circle").attr("class","symbol-init").attr("stroke","#f7931e").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("r",function(e){return e.selected?12:8}).attr("stroke-width",function(e){return e.selected?4:2}).style("stroke-dasharray",function(e){return e.dashed}).attr("fill","#fff"),e.append("g").selectAll("circle").data(this.state.nodes.filter(function(e){return e.task.action.includes("MODEL_ASIS")})).enter().append("circle").attr("class","symbol-circle").attr("stroke","#f7931e").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("r",function(e){return e.selected?12:8}).attr("stroke-width",function(e){return e.selected?4:2}).style("stroke-dasharray",function(e){return e.dashed}).attr("fill","#fff"),e.append("g").selectAll("rect").data(this.state.nodes.filter(function(e){return e.task.action.includes("MODEL_TOBE")})).enter().append("rect").attr("class","symbol-rectangle").attr("stroke","#f7931e").attr("stroke-width",2).attr("transform",function(e){return"translate("+(e.x-(e.selected?12:8))+","+(e.y-(e.selected?12:8))+")"}).attr("width",function(e){return 2*(e.selected?12:8)}).attr("height",function(e){return 2*(e.selected?12:8)}).attr("stroke-width",function(e){return e.selected?4:2}).attr("fill","#fff"),e.append("g").selectAll("path").data(this.state.nodes.filter(function(e){return e.task.action.includes("KPI")})).enter().append("path").classed("symbol-triangle",!0).attr("d",function(e){return Be.e().type(Be.f).size(14*(e.selected?12:8))()}).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("stroke","#f7931e").attr("stroke-width",function(e){return e.selected?4:2}).attr("fill","#fff"),this.handleClassName("init",!this.props.compareMode,this.props.compareMode,0),this.handleClassName("circle",!0,this.props.compareMode,0),this.handleClassName("rectangle",!0,this.props.compareMode,0),this.handleClassName("triangle",!this.props.compareMode,this.props.compareMode,0)}},{key:"componentDidUpdate",value:function(e,t){e.tasks!==this.props.tasks&&this.update(),e.selectedTasks!==this.props.selectedTasks&&this.update(),e.compareMode!==this.props.compareMode&&this.toggleCompareMode()}},{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){return this.did||(this.did=!0,this.update()),l.a.createElement("div",null,l.a.createElement("svg",{id:"svg-tree",width:this.state.width,height:this.state.height}))}}]),t}(n.Component),qe=window.$,Ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleAddUser=a.handleAddUser.bind(Object(p.a)(a)),a.handleCopyUrl=a.handleCopyUrl.bind(Object(p.a)(a)),a.state={users:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){var e=this;this.setState({users:null,error:!1,pending:!0},function(){var t={_id:e.props.project._id};e.props.socket.emit("/api/project/get",t,function(t){if(t.projects){var a={_id:{$nin:t.projects[0].users}};e.props.socket.emit("/api/user/get",a,function(t){t.users&&e.setState({users:t.users,error:!1,pending:!1},function(){var t={};e.state.users.map(function(e,a){return t[String(e.firstname+" "+e.lastname+" ("+e.roles+") - "+e._id)]=null}),qe("#input_autocomplete_adduser").autocomplete({data:t})}),t.error&&e.setState({users:null,error:!1,pending:!1})})}t.error&&e.setState({users:null,error:!1,pending:!1})})})}},{key:"componentDidMount",value:function(){var e=this;qe("#modal_adduser").modal(),this.update(),this.props.socket.on("/api/project/done",function(){e.update()})}},{key:"handleCopyUrl",value:function(e){e.preventDefault(),qe("#input_projecturl").select(),document.execCommand("copy")}},{key:"handleAddUser",value:function(e){var t=this;e.preventDefault(),this.refs.username.value.split("-").length<2?this.setState({error:"unknown user",pending:!1}):this.setState({error:!1,pending:!0},function(){var e=t.refs.username.value.split("-")[1].trim(),a=t.state.users.filter(function(t,a){return t._id===e})[0],n={_id:t.props.params._id},l={$push:{users:a._id}};t.props.socket.emit("/api/project/update",n,l,function(e){e.projects&&t.setState({error:!1,pending:!1},function(){qe("#modal_adduser").modal("close")}),e.error&&t.setState({error:e.error,pending:!1})})})}},{key:"render",value:function(){var e,t;this.state.pending&&(e=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"preloader-wrapper small active center"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))))),this.state.error&&(t=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))));var a=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col l10 m9 s12"},l.a.createElement("input",{id:"input_autocomplete_adduser",type:"text",ref:"username",className:"autocomplete",required:!0}),l.a.createElement("label",{htmlFor:"input_autocomplete_adduser"},"Find an existing user...")),l.a.createElement("div",{className:"input-field col l2 m3  s12 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"SUBMIT ",l.a.createElement("i",{className:"material-icons right"},"send"))));return l.a.createElement("div",{id:"modal_adduser",className:"modal"},l.a.createElement("div",{className:"rezbuild center",style:{marginBottom:"0"}},l.a.createElement("h4",{className:"white-text",style:{lineHeight:"150%"}},"Invite user")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("form",{className:"col s12",onSubmit:this.handleAddUser,autoComplete:"off"},a,e,t),l.a.createElement("form",{className:"col s12",onSubmit:this.handleCopyUrl,autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col l10 m9 s12"},l.a.createElement("input",{id:"input_projecturl",type:"text",ref:"input_projecturl",className:"validate",defaultValue:window.location.href.split("#")[0]+"/signin"}),l.a.createElement("label",{className:"active",htmlFor:"input_projecturl"},"Or share this url...")),l.a.createElement("div",{className:"input-field col l2 m3 s12 center"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"}," ",l.a.createElement("i",{className:"material-icons right"},"content_copy"),"COPY"))))))}}]),t}(n.Component),Ue=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Ke,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},He=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={users:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){var e=this;this.setState({users:null,error:!1,pending:!0},function(){var t={_id:e.props.project._id};e.props.socket.emit("/api/project/get",t,function(t){if(t.projects){var a={_id:{$in:t.projects[0].users}};e.props.socket.emit("/api/user/get",a,function(t){t.users&&e.setState({users:t.users,error:!1,pending:!1}),t.error&&e.setState({users:null,error:!1,pending:!1})})}t.error&&e.setState({users:null,error:!1,pending:!1})})})}},{key:"componentDidMount",value:function(){var e=this;this.update(),this.props.socket.on("/api/project/done",function(t){e.update()}),this.props.socket.on("/api/user/done",function(t){e.update()})}},{key:"render",value:function(){var e,t,a,n,r;return this.state.error&&(e=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error)))),this.state.pending?t=l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):(this.state.users&&(a=l.a.createElement("ul",{className:"collection",style:{border:0}},this.state.users.map(function(e,t){return l.a.createElement("li",{className:"collection-item avatar",key:t},l.a.createElement("i",{className:"medium material-icons circle white rezbuild-text",style:{fontSize:"42px"}},"account_circle"),l.a.createElement("span",{className:"title rezbuild-text",style:{fontWeight:"900"}},e.firstname," ",e.lastname),l.a.createElement("p",null,e.roles.filter(function(e){return _.a.ROLES.hasOwnProperty(e)}).map(function(e){return _.a.ROLES[e].name}).join(", ")),l.a.createElement("a",{href:"mailto:"+e.email,className:"btn secondary-content"},l.a.createElement("i",{className:"material-icons right"},"email")," EMAIL"))}))),r=l.a.createElement("a",{className:"btn waves-effect waves-light modal-trigger",href:"#modal_adduser"},l.a.createElement("i",{className:"material-icons left"},"person_add"),"Invite"),n=l.a.createElement(Ue,{project:this.props.project,params:this.props.params})),l.a.createElement("div",{className:"col s12 white z-depth-1",style:{paddingTop:"0.5rem"}},e,t,r,n,a)}}]),t}(n.Component),Ge=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(He,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},$e=window.$,Je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submit=a.submit.bind(Object(p.a)(a)),a.state={project:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({error:!1,pending:!0},function(){var e={_id:t.props.project._id},a={};Object.keys(t.refs).forEach(function(e){var n=t.refs[e].value;"on"===n&&(n=$e("#"+e).is(":checked")),a[e]=n}),t.props.socket.emit("/api/project/update",e,a,function(e){e.projects&&t.setState({project:e.projects[0],error:!1,pending:!1}),e.error&&t.setState({project:null,error:e.error,pending:!1})})})}},{key:"update",value:function(){var e=this;this.setState({users:null,error:!1,pending:!0},function(){var t={_id:e.props.project._id};e.props.socket.emit("/api/project/get",t,function(t){t.projects&&e.setState({project:t.projects[0],error:!1,pending:!1}),t.error&&e.setState({project:null,error:!1,pending:!1})})})}},{key:"componentDidMount",value:function(){var e=this;$e(document).ready(function(){$e("#projectInformation").tabs("select_tab","general"),$e("select").material_select()}),this.update(),this.props.socket.on("/api/project/done",function(t){e.update()})}},{key:"componentDidUpdate",value:function(e){this.state.project!==e.project&&($e("#projectInformation").tabs("select_tab","general"),$e("select").material_select())}},{key:"render",value:function(){var e,t,a,n,r,s,i=l.a.createElement("div",{className:"input-field col s12 center",style:{paddingBottom:"1rem"}},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},l.a.createElement("i",{className:"material-icons right"},"save"),"SAVE"));return this.state.project&&(e=l.a.createElement("div",{className:"section col s12 white z-depth-1"},l.a.createElement("h5",{className:"rezbuild-text col s12"},"General"),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{required:!0,id:"name",type:"text",ref:"name",defaultValue:this.state.project.name}),l.a.createElement("label",{className:"active",htmlFor:"name"},"Name")),l.a.createElement("div",{className:"input-field col s8"},l.a.createElement("input",{required:!0,id:"address",type:"text",ref:"address",defaultValue:this.state.project.address}),l.a.createElement("label",{className:"active",htmlFor:"address"},"Address")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{required:!0,id:"city",type:"text",ref:"city",defaultValue:this.state.project.city}),l.a.createElement("label",{className:"active",htmlFor:"city"},"City")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{required:!0,id:"country",type:"text",ref:"country",defaultValue:this.state.project.country}),l.a.createElement("label",{className:"active",htmlFor:"country"},"Country")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.context,id:"context",ref:"context"},l.a.createElement("option",{value:""},"Choose a context"),l.a.createElement("option",{name:"context",value:"City center",id:"context_city_center"},"City center"),l.a.createElement("option",{name:"context",value:"Suburbs",id:"context_suburbs"},"Suburbs"),l.a.createElement("option",{name:"context",value:"Isolated",id:"context_isolated"},"Isolated")),l.a.createElement("label",null,"Context")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("input",{required:!0,id:"degree",ref:"degree",type:"number",step:"any",defaultValue:this.state.project.degree}),l.a.createElement("label",{className:"active",htmlFor:"degree"}," Degree Days (\xb0)")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.climat,id:"climat",ref:"climat"},l.a.createElement("option",{value:""},"Choose a climat zone"),l.a.createElement("option",{name:"context",value:"Tropical zone",id:"climat_tropical"},"Tropical zone"),l.a.createElement("option",{name:"context",value:"Subtropical zone",id:"climat_subtropical"},"Subtropical zone"),l.a.createElement("option",{name:"context",value:"Temperate zone",id:"climat_temperate"},"Temperate zone"),l.a.createElement("option",{name:"context",value:"Cold zone",id:"climat_cold"},"Cold zone")),l.a.createElement("label",null,"Climat Zone")),i)),this.state.project&&(t=l.a.createElement("div",{className:"section col s12 white z-depth-1",style:{marginTop:"2rem"}},l.a.createElement("h5",{className:"rezbuild-text col s12"},"Needs"),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("textarea",{id:"refurbishmentExpectations",ref:"refurbishmentExpectations",className:"materialize-textarea",defaultValue:this.state.project.refurbishmentExpectations}),l.a.createElement("label",{className:"active",htmlFor:"refurbishmentExpectations"},"Refurbishment Project Expectations")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"energyConsumptionExpectations",ref:"energyConsumptionExpectations",min:"0",max:"100",defaultValue:this.state.project.energyConsumptionExpectations}),l.a.createElement("label",{htmlFor:"energyConsumptionExpectations"},"Energy Consumption Expectations"))),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"environmentalExpectations",ref:"environmentalExpectations",min:"0",max:"100",defaultValue:this.state.project.environmentalExpectations}),l.a.createElement("label",{htmlFor:"environmentalExpectations"},"Environmental Expectations"))),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"economicalExpectations",ref:"economicalExpectations",min:"0",max:"100",defaultValue:this.state.project.economicalExpectations}),l.a.createElement("label",{htmlFor:"economicalExpectations"},"Economical Expectations"))),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"socialExpectations",ref:"socialExpectations",min:"0",max:"100",defaultValue:this.state.project.socialExpectations}),l.a.createElement("label",{htmlFor:"socialExpectations"},"Social Expectations"))),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("p",{className:"range-field"},l.a.createElement("input",{type:"range",id:"comfortExpectations",ref:"comfortExpectations",min:"0",max:"100",defaultValue:this.state.project.comfortExpectations}),l.a.createElement("label",{htmlFor:"comfortExpectations"},"Comfort Expectations"))),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"homeDuringRenovation",ref:"homeDuringRenovation",defaultChecked:this.state.project.homeDuringRenovation}),l.a.createElement("label",{htmlFor:"homeDuringRenovation"},"Don't leave home during renovation")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"differentLocationDuringRenovation",ref:"differentLocationDuringRenovation",defaultChecked:this.state.project.differentLocationDuringRenovation}),l.a.createElement("label",{htmlFor:"differentLocationDuringRenovation"},"Have a different location during renovation")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"elevatorInstallation",ref:"elevatorInstallation",defaultChecked:this.state.project.elevatorInstallation}),l.a.createElement("label",{htmlFor:"elevatorInstallation"},"Elevator Installation")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"improvedAccessibility",ref:"improvedAccessibility",defaultChecked:this.state.project.improvedAccessibility}),l.a.createElement("label",{htmlFor:"improvedAccessibility"},"Improved Accessibility")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"reductionBillAmount",ref:"reductionBillAmount",defaultChecked:this.state.project.reductionBillAmount}),l.a.createElement("label",{htmlFor:"reductionBillAmount"},"Reduction in bills amount")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"moreHomeSpaces",ref:"moreHomeSpaces",defaultChecked:this.state.project.moreHomeSpaces}),l.a.createElement("label",{htmlFor:"moreHomeSpaces"},"More home spaces")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"brighterEnvironments",ref:"brighterEnvironments",defaultChecked:this.state.project.brighterEnvironments}),l.a.createElement("label",{htmlFor:"brighterEnvironments"},"Brighter environments")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"extraServiceRoom",ref:"extraServiceRoom",defaultChecked:this.state.project.extraServiceRoom}),l.a.createElement("label",{htmlFor:"extraServiceRoom"},"Extra service room")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"heatingUpgrading",ref:"heatingUpgrading",defaultChecked:this.state.project.heatingUpgrading}),l.a.createElement("label",{htmlFor:"heatingUpgrading"},"Heating upgrading")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"coolingUpgrading",ref:"coolingUpgrading",defaultChecked:this.state.project.coolingUpgrading}),l.a.createElement("label",{htmlFor:"coolingUpgrading"},"Cooling upgrading")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"ventilationUpgrading",ref:"ventilationUpgrading",defaultChecked:this.state.project.ventilationUpgrading}),l.a.createElement("label",{htmlFor:"ventilationUpgrading"},"Ventilation upgrading")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"consumptionControl",ref:"consumptionControl",defaultChecked:this.state.project.consumptionControl}),l.a.createElement("label",{htmlFor:"consumptionControl"},"Consumption control")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"eliminitationAirInfiltration",ref:"eliminitationAirInfiltration",defaultChecked:this.state.project.eliminitationAirInfiltration}),l.a.createElement("label",{htmlFor:"eliminitationAirInfiltration"},"Elimination of air infiltration")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"shadingUpgrading",ref:"shadingUpgrading",defaultChecked:this.state.project.shadingUpgrading}),l.a.createElement("label",{htmlFor:"shadingUpgrading"},"Shading upgrading")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"airQualityImprovement",ref:"airQualityImprovement",defaultChecked:this.state.project.airQualityImprovement}),l.a.createElement("label",{htmlFor:"airQualityImprovement"},"Air quality improvement")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"noiseReduction",ref:"noiseReduction",defaultChecked:this.state.project.noiseReduction}),l.a.createElement("label",{htmlFor:"noiseReduction"},"Noise reduction"))),i)),this.state.project&&(a=l.a.createElement("div",{className:"section col s12 white z-depth-1",style:{marginTop:"2rem"}},l.a.createElement("h5",{className:"rezbuild-text col s12"},"Building"),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("select",{required:!0,id:"exposure",ref:"exposure",defaultValue:this.state.project.exposure},l.a.createElement("option",{value:""},"Choose an exposure"),l.a.createElement("option",{name:"exposure",value:"N",id:"exposure_n"},"N"),l.a.createElement("option",{name:"exposure",value:"NE",id:"exposure_ne"},"NE"),l.a.createElement("option",{name:"exposure",value:"E",id:"exposure_e"},"E"),l.a.createElement("option",{name:"exposure",value:"SE",id:"exposure_se"},"SE"),l.a.createElement("option",{name:"exposure",value:"S",id:"exposure_s"},"S"),l.a.createElement("option",{name:"exposure",value:"SW",id:"exposure_sw"},"SW"),l.a.createElement("option",{name:"exposure",value:"W",id:"exposure_w"},"W"),l.a.createElement("option",{name:"exposure",value:"NW",id:"exposure_nw"},"NW")),l.a.createElement("label",null,"Exposure")),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.home,id:"home",ref:"home"},l.a.createElement("option",{value:""},"Choose an home type"),l.a.createElement("option",{name:"exposure",value:"House",id:"home_house"},"House"),l.a.createElement("option",{name:"exposure",value:"Apartment",id:"home_apartment"},"Apartment")),l.a.createElement("label",null,"Home Type")),l.a.createElement("div",{className:"input-field col s3"},l.a.createElement("input",{id:"year",type:"number",step:"any",ref:"year",defaultValue:this.state.project.year}),l.a.createElement("label",{className:"active",htmlFor:"year"},"Construction year")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.gradation,id:"gradation",ref:"gradation"},l.a.createElement("option",{value:""},"Choose a color gradation of external finish"),l.a.createElement("option",{name:"gradation",value:"Light",id:"gradation_light"},"Light"),l.a.createElement("option",{name:"gradation",value:"Average",id:"gradation_average"},"Average"),l.a.createElement("option",{name:"gradation",value:"Dark",id:"gradation_dark"},"Dark")),l.a.createElement("label",null,"Color Gradation of External Finish")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.property,id:"property",ref:"property"},l.a.createElement("option",{value:""},"Property"),l.a.createElement("option",{name:"property",value:"Private",id:"property_private"},"Private"),l.a.createElement("option",{name:"property",value:"Public",id:"property_public"},"Public")),l.a.createElement("label",null,"property")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:"buildingTaxonomy",type:"text",ref:"buildingTaxonomy",defaultValue:this.state.project.buildingTaxonomy}),l.a.createElement("label",{className:"active",htmlFor:"buildingTaxonomy"},"Building Taxonomy")),i)),this.state.project&&(n=l.a.createElement("div",{className:"section col s12 white z-depth-1",style:{marginTop:"2rem"}},l.a.createElement("h5",{className:"rezbuild-text col s12"},"Geometry"),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"floors",ref:"floors",type:"number",step:"any",defaultValue:this.state.project.floors}),l.a.createElement("label",{className:"active",htmlFor:"floors"}," Number of floors (n\xb0)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"interFloorHeight",ref:"interFloorHeight",type:"number",step:"any",defaultValue:this.state.project.interFloorHeight}),l.a.createElement("label",{className:"active",htmlFor:"interFloorHeight"}," Clear inter-floor height (m)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"floorNumber",ref:"floorNumber",type:"number",step:"any",defaultValue:this.state.project.floorNumber}),l.a.createElement("label",{className:"active",htmlFor:"floorNumber"},"Floor number (n\xb0) (if apartment)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"apartmentByFloor",ref:"apartmentByFloor",type:"number",step:"any",defaultValue:this.state.project.apartmentByFloor}),l.a.createElement("label",{className:"active",htmlFor:"apartmentByFloor"},"Number of apartments per floor (n\xb0) (if apartment)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"totalFloorsBuilding",ref:"totalFloorsBuilding",type:"number",step:"any",defaultValue:this.state.project.totalFloorsBuilding}),l.a.createElement("label",{className:"active",htmlFor:"totalFloorsBuilding"},"Total floors of the building (n\xb0)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"footprintBuilding",ref:"footprintBuilding",type:"number",step:"any",defaultValue:this.state.project.footprintBuilding}),l.a.createElement("label",{className:"active",htmlFor:"footprintBuilding"},"Net footprint of building (m\xb2)")),l.a.createElement("div",{className:"input-field col s6 m4"},l.a.createElement("input",{required:!0,id:"totalUsefulSurface",ref:"totalUsefulSurface",type:"number",step:"any",defaultValue:this.state.project.totalUsefulSurface}),l.a.createElement("label",{className:"active",htmlFor:"totalUsefulSurface"},"Total useful surface (m\xb2)")),l.a.createElement("h6",{className:"grey-text col s12"},"Linear dimension divided by exposure"),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionN",ref:"linearDimensionN",type:"number",step:"any",defaultValue:this.state.project.linearDimensionN}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionN"},"N (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionNE",ref:"linearDimensionNE",type:"number",step:"any",defaultValue:this.state.project.linearDimensionNE}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionNE"},"NE (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionE",ref:"linearDimensionE",type:"number",step:"any",defaultValue:this.state.project.linearDimensionE}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionE"},"E (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionSE",ref:"linearDimensionSE",type:"number",step:"any",defaultValue:this.state.project.linearDimensionSE}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionSE"},"SE (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionS",ref:"linearDimensionS",type:"number",step:"any",defaultValue:this.state.project.linearDimensionS}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionS"},"S (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionSW",ref:"linearDimensionSW",type:"number",step:"any",defaultValue:this.state.project.linearDimensionSW}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionSW"},"SW (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionW",ref:"linearDimensionW",type:"number",step:"any",defaultValue:this.state.project.linearDimensionW}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionW"},"W (m)")),l.a.createElement("div",{className:"input-field col s2 m1"},l.a.createElement("input",{required:!0,id:"linearDimensionNW",ref:"linearDimensionNW",type:"number",step:"any",defaultValue:this.state.project.linearDimensionNW}),l.a.createElement("label",{className:"active",htmlFor:"linearDimensionNW"},"NW (m)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.floorAdjacent,id:"floorAdjacent",ref:"floorAdjacent"},l.a.createElement("option",{value:""},"Choose floor adjacent to the unheated room"),l.a.createElement("option",{name:"floorAdjacent",value:"Ground",id:"floor_adjacent_ground"},"Ground"),l.a.createElement("option",{name:"floorAdjacent",value:"Cellar",id:"floor_adjacent_cellar"},"Cellar/Garage"),l.a.createElement("option",{name:"floorAdjacent",value:"External",id:"floor_adjacent_external"},"External"),l.a.createElement("option",{name:"floorAdjacent",value:"Land",id:"floor_adjacent_land"},"Land/Cellar"),l.a.createElement("option",{name:"floorAdjacent",value:"Outside",id:"floor_adjacent_outside"},"Cellar/Outside")),l.a.createElement("label",null,"Floor adjacent to the unheated room")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.ceilingAdjacent,id:"ceilingAdjacent",ref:"ceilingAdjacent"},l.a.createElement("option",{value:""},"Choose ceiling adjacent to the unheated room"),l.a.createElement("option",{name:"ceilingAdjacent",value:"Attic",id:"ceiling_adjacent_attic"},"Attic"),l.a.createElement("option",{name:"ceilingAdjacent",value:"External",id:"ceiling_adjacent_external"},"External"),l.a.createElement("option",{name:"ceilingAdjacent",value:"AtticExternal",id:"ceiling_adjacent_attic_external"},"Attic/External")),l.a.createElement("label",null,"Ceiling adjacent to the unheated room")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{required:!0,defaultValue:this.state.project.wallAdjacent,id:"wallAdjacent",ref:"wallAdjacent"},l.a.createElement("option",{value:""},"Choose walls adjacent to the unheated room"),l.a.createElement("option",{name:"wallAdjacent",value:"Internal stairwell (only one facing)",id:"wall_adjacent_internal_one_face"},"Internal stairwell (only one facing)"),l.a.createElement("option",{name:"wallAdjacent",value:"Internal stairwell (no facing)",id:"wall_adjacent_internal_no_face"},"Internal stairwell (no facing)"),l.a.createElement("option",{name:"wallAdjacent",value:"External stairwell",id:"wall_adjacent_external"},"External stairwell"),l.a.createElement("option",{name:"wallAdjacent",value:"Other unheated rooms",id:"wall_adjacent_other"},"Other unheated rooms")),l.a.createElement("label",null,"Walls adjacent to the unheated room")),i)),this.state.project&&(r=l.a.createElement("div",{className:"section col s12 white z-depth-1",style:{marginTop:"2rem"}},l.a.createElement("h5",{className:"rezbuild-text col s12"},"Envelope"),l.a.createElement("h6",{className:"grey-text col s12"},"Number of windows wings"),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsN",ref:"windowsN",type:"number",step:"any",defaultValue:this.state.project.windowsN}),l.a.createElement("label",{className:"active",htmlFor:"windowsN"},"N (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsNE",ref:"windowsNE",type:"number",step:"any",defaultValue:this.state.project.windowsNE}),l.a.createElement("label",{className:"active",htmlFor:"windowsNE"},"NE (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsE",ref:"windowsE",type:"number",step:"any",defaultValue:this.state.project.windowsE}),l.a.createElement("label",{className:"active",htmlFor:"windowsE"},"E (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsSE",ref:"windowsSE",type:"number",step:"any",defaultValue:this.state.project.windowsSE}),l.a.createElement("label",{className:"active",htmlFor:"windowsSE"},"SE (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsS",ref:"windowsS",type:"number",step:"any",defaultValue:this.state.project.windowsS}),l.a.createElement("label",{className:"active",htmlFor:"windowsS"},"S (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsSW",ref:"windowsSW",type:"number",step:"any",defaultValue:this.state.project.windowsSW}),l.a.createElement("label",{className:"active",htmlFor:"windowsSW"},"SW (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsW",ref:"windowsW",type:"number",step:"any",defaultValue:this.state.project.windowsW}),l.a.createElement("label",{className:"active",htmlFor:"windowsW"},"W (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsNW",ref:"windowsNW",type:"number",step:"any",defaultValue:this.state.project.windowsNW}),l.a.createElement("label",{className:"active",htmlFor:"windowsNW"},"NW (n\xb0)")),l.a.createElement("h6",{className:"grey-text col s12"},"Number of windows-door wings"),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorN",ref:"windowsDoorN",type:"number",step:"any",defaultValue:this.state.project.windowsDoorN}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorN"},"N (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorNE",ref:"windowsDoorNE",type:"number",step:"any",defaultValue:this.state.project.windowsDoorNE}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorNE"},"NE (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorE",ref:"windowsDoorE",type:"number",step:"any",defaultValue:this.state.project.windowsDoorE}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorE"},"E (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorSE",ref:"windowsDoorSE",type:"number",step:"any",defaultValue:this.state.project.windowsDoorSE}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorSE"},"SE (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorS",ref:"windowsDoorS",type:"number",step:"any",defaultValue:this.state.project.windowsDoorS}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorS"},"S (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorSW",ref:"windowsDoorSW",type:"number",step:"any",defaultValue:this.state.project.windowsDoorSW}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorSW"},"SW (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorW",ref:"windowsDoorW",type:"number",defaultValue:this.state.project.windowsDoorW}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorW"},"W (n\xb0)")),l.a.createElement("div",{className:"input-field col  s2 m1"},l.a.createElement("input",{required:!0,id:"windowsDoorNW",ref:"windowsDoorNW",type:"number",step:"any",defaultValue:this.state.project.windowsDoorNW}),l.a.createElement("label",{className:"active",htmlFor:"windowsDoorNW"},"NW (n\xb0)")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("select",{required:!0,id:"typeGlass",ref:"typeGlass",defaultValue:this.state.project.typeGlass},l.a.createElement("option",{value:""},"Choose a type of glass"),l.a.createElement("option",{name:"typeGlass",value:"Single glass",id:"type_glass_single"},"Single glass"),l.a.createElement("option",{name:"typeGlass",value:"Double glazing",id:"type_glass_double"},"Double glazing"),l.a.createElement("option",{name:"typeGlass",value:"Low emission double glazing",id:"type_glass_low_emission_double"},"Low emission double glazing"),l.a.createElement("option",{name:"typeGlass",value:"Low emission double glazing",id:"type_glass_triple"},"Triple glass"),l.a.createElement("option",{name:"typeGlass",value:"Low emission double glazing",id:"type_glass_low_emission_triple"},"Low emission triple glazing")),l.a.createElement("label",null,"Type of glass")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("select",{required:!0,id:"typeFrame",ref:"typeFrame",defaultValue:this.state.project.typeFrame},l.a.createElement("option",{value:""},"Choose a type of frame"),l.a.createElement("option",{name:"typeFrame",value:"Wood",id:"type_frame_wood"},"Wood"),l.a.createElement("option",{name:"typeFrame",value:"PVC",id:"type_frame_pvc"},"PVC"),l.a.createElement("option",{name:"typeFrame",value:"Metal",id:"type_frame_metal"},"Metal"),l.a.createElement("option",{name:"typeFrame",value:"Miscellaneous",id:"type_frame_miscellaneous"},"Miscellaneous")),l.a.createElement("label",null,"Type of frame")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"rollerShutterBoxes",ref:"rollerShutterBoxes",defaultChecked:this.state.project.rollerShutterBoxes}),l.a.createElement("label",{htmlFor:"rollerShutterBoxes"},"Roller shutter boxes")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"externalShields",ref:"externalShields",defaultChecked:this.state.project.externalShields}),l.a.createElement("label",{htmlFor:"externalShields"},"External shields")),l.a.createElement("p",{className:"col s12 m6 s4"},l.a.createElement("input",{type:"checkbox",id:"presenceBalcony",ref:"presenceBalcony",defaultChecked:this.state.project.presenceBalcony}),l.a.createElement("label",{htmlFor:"presenceBalcony"},"Presence of balcony"))),i)),this.state.project&&(s=l.a.createElement("div",null,e,t,a,n,r)),l.a.createElement("form",{className:"col s12",onSubmit:this.submit},s,this.state.pending?l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))):"",this.state.error?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h6",{className:"rezbuild-text"},this.state.error))):"")}}]),t}(n.Component),Ye=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Je,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},Qe=window.$,Xe=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;Qe.fn.attrchange=function(e){if(Xe){var t={subtree:!1,attributes:!0},a=new Xe(function(t){t.forEach(function(t){e.call(t.target,t.attributeName)})});return this.each(function(){a.observe(this,t)})}};var Ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={highlightedTask:null,data:[],categories:[],series:[],error:!1,pending:!1},a.compareVersions=a.compareVersions.bind(Object(p.a)(a)),a.highlightTask=a.highlightTask.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"highlightTask",value:function(e){this.setState({highlightedTask:e})}},{key:"compareVersions",value:function(){this.props.tasks&&this.props.tasks.length>0&&this.props.selectedTasks&&this.props.selectedTasks.length>0&&this.setState({data:Te.computeScoreOfRelevantTask.apply(Te,[this.props.tasks].concat(Object(ie.a)(this.props.selectedTasks)))})}},{key:"componentWillMount",value:function(){window.scrollTo(0,0)}},{key:"componentDidMount",value:function(){var e=this;this.compareVersions(),Qe("#carousel-version-comparator").carousel({noWrap:!0}),Qe(".carousel-item").attrchange(function(t){if("class"===t){var a=Qe(".carousel-item.active");if(null!==a&&a.length>0){var n=e.props.selectedTasks.filter(function(e){return"carousel-item-"+e._id===a[0].id});n.length>0&&e.highlightTask(n[0])}}}),Qe(".carousel-item").click(function(t){var a=e.props.selectedTasks.filter(function(e){return"carousel-item-"+e._id===t.currentTarget.id});a.length>0&&e.highlightTask(a[0])}),Qe("#carousel-item-"+this.props.selectedTasks[this.props.selectedTasks.length-1]._id).click(),Qe("#carousel-version-comparator").carousel("set",this.props.selectedTasks.length-1)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.selectedTasks.length!==this.props.selectedTasks.length&&(this.compareVersions(),Qe("#carousel-version-comparator").carousel({noWrap:!0}),Qe(".carousel-item").attrchange(function(e){if("class"===e){var t=Qe(".carousel-item.active");if(null!==t&&t.length>0){var n=a.props.selectedTasks.filter(function(e){return"carousel-item-"+e._id===t[0].id});n.length>0&&a.highlightTask(n[0])}}}),Qe(".carousel-item").click(function(e){var t=a.props.selectedTasks.filter(function(t){return"carousel-item-"+t._id===e.currentTarget.id});t.length>0&&a.highlightTask(t[0])}),Qe("#carousel-item-"+this.props.selectedTasks[this.props.selectedTasks.length-1]._id).click(),Qe("#carousel-version-comparator").carousel("set",this.props.selectedTasks.length-1))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"section transparent white-text",style:{paddingTop:0}},l.a.createElement("div",{className:"row",style:{marginBottom:0}},l.a.createElement("div",{className:"carousel col s7 transparent grey-text",id:"carousel-version-comparator",key:"carousel-"+this.props.selectedTasks.length},this.props.selectedTasks.map(function(e){return l.a.createElement("a",{className:"carousel-item z-depth-1 white",id:"carousel-item-"+e._id,key:"carousel-item-"+e._id,ref:"carousel-item-"+e._id,href:"#carousel-item-"+e._id},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center rezbuild"},l.a.createElement("h6",{className:"white-text col s12",style:{marginBottom:"0.1rem"}},l.a.createElement("b",null,e.action)),l.a.createElement("br",null),l.a.createElement("h6",{className:"white-text col s12",style:{fontSize:"10px",marginTop:"0.1rem"}},je()(e.date).format("LLL"))),l.a.createElement("div",{className:"col s12 center white"},l.a.createElement(De,{modelTask:e,allowFullScreen:!1}))))})),l.a.createElement("div",{className:"col s5 transparent grey-text"},l.a.createElement("div",{className:"col s10 white push-s1 z-depth-1"}," ",l.a.createElement("h6",{className:"col s12 center"},"KPI CHART COMPARATOR"),this.state.data.length>0?this.state.data.map(function(t,a){return l.a.createElement(Ce.a,{key:a},function(a){return l.a.createElement("div",null,l.a.createElement("h6",{className:"rezbuild-text col s12 center-align",style:{padding:0}},t.category," SCORE"),l.a.createElement(ye,{key:t.category+"-"+(new Date).getTime(),highlightedTask:e.state.highlightedTask,data:t.data,parentWidth:a.width,parentTop:a.top,parentLeft:a.left,parentRef:a.ref,resizeParent:a.resize}))})}):""))))}}]),t}(n.Component),et=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(Ze,Object.assign({},e,{host:t.host,socket:t.socket,uploader:t.uploader}))})},tt=window.$,at=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={compareMode:!1,selectedTasks:[],tasks:[],users:[],user:[],error:!1,pending:!1},a.setTask=a.setTask.bind(Object(p.a)(a)),a.addTask=a.addTask.bind(Object(p.a)(a)),a.removeTask=a.removeTask.bind(Object(p.a)(a)),a.fetchTasks=a.fetchTasks.bind(Object(p.a)(a)),a.fetchUsers=a.fetchUsers.bind(Object(p.a)(a)),a.fetchUser=a.fetchUser.bind(Object(p.a)(a)),a.toggleCompareMode=a.toggleCompareMode.bind(Object(p.a)(a)),a.update=a.update.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"toggleCompareMode",value:function(){this.setState({compareMode:!this.state.compareMode})}},{key:"fetchTasks",value:function(){var e=this,t={project:this.props.project._id};this.props.socket.emit("/api/task/get",t,function(t){t.tasks&&e.setState({tasks:t.tasks,selectedTasks:[],error:!1}),t.error&&e.setState({tasks:[],error:t.error})})}},{key:"fetchUser",value:function(){var e=this;this.props.socket.emit("/api/user/get",{_id:"token"},function(t){t.users?e.setState({user:t.users[0],error:!1}):t.error?e.setState({user:null,error:t.error}):e.setState({user:null,error:!1})})}},{key:"fetchUsers",value:function(){var e=this,t={_id:this.props.project._id};this.props.socket.emit("/api/project/get",t,function(t){if(t.projects){var a={_id:{$in:t.projects[0].users}};e.props.socket.emit("/api/user/get",a,function(t){t.users&&e.setState({users:t.users,error:!1}),t.error&&e.setState({users:[],error:t.error})})}t.error&&e.setState({users:[],error:t.error})})}},{key:"update",value:function(){this.fetchTasks(),this.fetchUsers(),this.fetchUser()}},{key:"setTask",value:function(e){e?this.setState({selectedTasks:[e]}):this.setState({selectedTasks:[]})}},{key:"addTask",value:function(e){this.setState({selectedTasks:this.state.selectedTasks.concat([e])})}},{key:"removeTask",value:function(e){this.setState({selectedTasks:this.state.selectedTasks.filter(function(t){return t._id!==e._id})})}},{key:"componentDidMount",value:function(){var e=this;tt(document).ready(function(){tt(".tabs").tabs(),tt(".tooltipped").tooltip({delay:0,html:!0})}),this.update(),this.props.socket.on("/api/task/done",function(){return e.fetchTasks()}),this.props.socket.on("/api/user/done",function(){return e.fetchUsers()&&e.fetchUser()})}},{key:"componentWillUnmount",value:function(){tt(".tooltipped").tooltip("remove")}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))));return l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 white"},l.a.createElement("ul",{className:"tabs"},l.a.createElement("li",{className:"tab col s2 tooltipped","data-position":"top","data-tooltip":"Manage project tasks, versions and files"},l.a.createElement("a",{className:"active",href:"#tab_board"},"Workspace")),l.a.createElement("li",{className:"tab col s2 tooltipped","data-position":"top","data-tooltip":"Make use of project tools"},l.a.createElement("a",{href:"#tab_tools"},"Tools")),l.a.createElement("li",{className:"tab col s2 tooltipped","data-position":"top","data-tooltip":"Invite and communicate with collaborators"},l.a.createElement("a",{href:"#tab_team"},"Team")),l.a.createElement("li",{className:"tab col s3 tooltipped","data-position":"top","data-tooltip":"Update general and specific information"},l.a.createElement("a",{href:"#tab_project"},"Project Information"))))),l.a.createElement("div",{id:"tab_board",className:"col s12"},l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingBottom:0,paddingTop:0,marginTop:"1rem"}},l.a.createElement("div",{className:"row transparent",style:{marginBottom:0}},l.a.createElement("div",{className:"col s12 transparent"},l.a.createElement("h5",{className:"rezbuild-text   tooltipped","data-position":"top","data-tooltip":"Click on a node to select a version of the project"}," Navigation "),this.state.tasks.length>0?l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"switch"},l.a.createElement("label",null,"TASK MODE",l.a.createElement("input",{type:"checkbox",checked:this.state.compareMode,ref:"compareMode",onChange:function(){return e.toggleCompareMode()}}),l.a.createElement("span",{className:"lever"}),"COMPARE MODE"))):"",l.a.createElement("div",{className:"section",style:{paddingBottom:0,width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},this.state.tasks.length>0&&this.state.users.length>0?l.a.createElement(Re,{tasks:this.state.tasks,selectedTasks:this.state.selectedTasks,setTask:this.setTask,addTask:this.addTask,removeTask:this.removeTask,compareMode:this.state.compareMode}):t))),this.state.compareMode?this.state.tasks.length>0&&this.state.selectedTasks.length>0&&null!==this.state.user?l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col l12 m12 s12 transparent"},l.a.createElement("div",{className:"section"},l.a.createElement(et,{project:this.props.project,user:this.props.user,tasks:this.state.tasks,selectedTasks:this.state.selectedTasks,setTask:this.setTask,addTask:this.addTask,removeTask:this.removeTask}))))):"":this.state.tasks.length>0&&this.state.selectedTasks.length>0&&null!==this.state.user?l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col l12 m12 s12 transparent"},l.a.createElement("div",{className:"section"},l.a.createElement(Ve,{project:this.props.project,user:this.props.user,tasks:this.state.tasks,task:this.state.selectedTasks[0],setTask:this.setTask,addTask:this.addTask,removeTask:this.removeTask}))))):""),l.a.createElement("div",{className:"section",style:{display:this.state.compareMode?"none":"block",marginLeft:"2%",marginRight:"2%",paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col l12 m12 s12 transparent"},l.a.createElement("h5",{className:"rezbuild-text   tooltipped","data-position":"top","data-tooltip":"Drag-And-Drop cards to assign or perform tasks at this version of the project"},"Tasks"),l.a.createElement("div",{className:"section"},this.state.tasks.length>0&&this.state.users.length>0&&this.state.user?l.a.createElement(ke,{project:this.props.project,users:this.state.users,user:this.state.user,tasks:this.state.tasks,task:this.state.selectedTasks[0],setTask:this.setTask,addTask:this.addTask,removeTask:this.removeTask}):t))))),l.a.createElement("div",{id:"tab_tools",className:"col s12"},l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingBottom:0,paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row transparent",style:{marginBottom:0}},l.a.createElement("div",{className:"col s12 transparent"},l.a.createElement("div",{className:"section",style:{height:"250px",paddingBottom:0}},l.a.createElement("div",{className:"col s12 m6"},l.a.createElement("div",{className:"card white"},l.a.createElement("div",{className:"card-content black-text"},l.a.createElement("span",{className:"card-title rezbuild-text"},"OpenBimLibraryTool"),l.a.createElement("p",null,"Description of OpenBimLibraryTool...")),l.a.createElement("div",{className:"card-action"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild white-text",target:"_blank",rel:"noopener noreferrer",href:"/technologies"},"OPEN IN NEW TAB ",l.a.createElement("i",{className:"material-icons right"},"open_in_new"))))),l.a.createElement("div",{className:"col s12 m6"},l.a.createElement("div",{className:"card white"},l.a.createElement("div",{className:"card-content black-text"},l.a.createElement("span",{className:"card-title rezbuild-text"},"RankingTechnologyTool"),l.a.createElement("p",null,"Description of RankingTechnologyTool...")),l.a.createElement("div",{className:"card-action"},l.a.createElement("a",{className:"btn waves-effect waves-light rezbuild white-text",target:"_blank",rel:"noopener noreferrer",href:"http://rezbuild-sorter.herokuapp.com"},"OPEN IN NEW TAB ",l.a.createElement("i",{className:"material-icons right"},"open_in_new")))))))))),l.a.createElement("div",{id:"tab_team",className:"col s12"},l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingBottom:0,paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row transparent"},l.a.createElement("div",{className:"col s12 transparent"},l.a.createElement("div",{className:"section"},l.a.createElement(Ge,{project:this.props.project,params:this.props.params})))))),l.a.createElement("div",{id:"tab_project",className:"col s12"},l.a.createElement("div",{className:"section",style:{marginLeft:"2%",marginRight:"2%",paddingBottom:0,paddingTop:"0.2rem"}},l.a.createElement("div",{className:"row transparent"},l.a.createElement("div",{className:"col s12 transparent"},l.a.createElement("div",{className:"section"},l.a.createElement(Ye,{project:this.props.project,params:this.props.params})))))))}}]),t}(n.Component),nt=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(at,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={project:null,error:!1,pending:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({project:null,error:!1,pending:!1},function(){var t={_id:e.props.params._id};e.props.socket.emit("/api/project/get",t,function(t){t.projects&&e.setState({project:t.projects[0],error:!1,pending:!1}),t.error&&e.setState({project:null,error:t.error,pending:!1},function(){u.d.push("/")})})})}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.project?l.a.createElement(I,{path:["Projects",this.state.project.name]}):"",this.state.project?l.a.createElement(nt,{project:this.state.project,params:this.props.params}):"")}}]),t}(n.Component),rt=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(lt,Object.assign({},e,{socket:t.socket,uploader:t.uploader}))})},st=a(295),it=window.$,ot={option:function(e,t){return Object(Oe.a)({},e,{color:t.isSelected?"white":"black",backgroundColor:t.isSelected?"#f7931e":"white"})},control:function(e,t){return Object(Oe.a)({},e,{marginTop:0,border:"4px solid #f7931e",borderRadius:0,boxShadow:"none","&:hover":{border:"4px solid #f7931e",borderRadius:0}})},multiValue:function(e,t){t.data;return Object(Oe.a)({},e,{backgroundColor:"#f7931e"})},multiValueLabel:function(e,t){t.data;return Object(Oe.a)({},e,{backgroundColor:"#f7931e",color:"white"})},multiValueRemove:function(e,t){t.data;return Object(Oe.a)({},e,{backgroundColor:"#f7931e",color:"white",":hover":{backgroundColor:"#f7931e",color:"white"}})}},ct=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={technologies:[],selectedCategories:[]},a.fetch=a.fetch.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({selectedCategories:e||[]})}},{key:"fetch",value:function(){var e=[{category:"INSULATION",family:"Air Tighness",company:"PLACO",name:"Air Tightness Gypsum"},{category:"INSULATION",family:"Aerogel",company:"PLACO",name:"Insulating Gypsum"},{category:"INSULATION",family:"Placotherm",company:"PLACO",name:"Ventilated Facade Placotherm"},{category:"HVAC",family:"Radiant Floor",company:"EXPLODED View",name:"HP Radiant Floor Pactherm"},{category:"HVAC",family:"Heat Pump",company:"UNOTT",name:"Solar Assisted Heat Pump"},{category:"RENEWABLES",family:"Photovoltaic Panels",company:"ONYX",name:"Amorphous Silicon PV Glass"},{category:"RENEWABLES",family:"Photovoltaic Panels",company:"ONYX",name:"Christalline PV Glass"},{category:"FACADE",family:"Additive Manufacturing",company:"VIAS",name:"3D Printing Facade"},{category:"BEMS",family:"Advanced BEMS",company:"MAETRICS",name:"SmartBox"}],t=Object(ie.a)(new Set(e.map(function(e){return e.category}))).map(function(e){return{value:e,label:e}});this.setState({technologies:e,selectedCategories:t})}},{key:"componentDidMount",value:function(){this.fetch(),it(document).ready(function(){it("select").material_select()})}},{key:"render",value:function(){var e=this,t=Object(ie.a)(new Set(this.state.technologies.map(function(e){return e.category}))).map(function(e){return{value:e,label:e}});return l.a.createElement("div",{className:"row",style:{paddingTop:"8vh"}},l.a.createElement("div",{className:"col push-s1 s10 center transparent",style:{padding:"0rem"}},l.a.createElement("div",{className:"col s12 center white"},l.a.createElement("div",{className:"col s12 rezbuild"},l.a.createElement("img",{src:"/img/jpg/logo.jpg",alt:"logo",style:{maxHeight:"4rem"}})),l.a.createElement(st.a,{styles:ot,options:t,value:this.state.selectedCategories,onChange:this.handleChange,isMulti:!0})),l.a.createElement("div",{className:"col s12",style:{padding:"0.5rem"}},this.state.technologies.filter(function(t){return e.state.selectedCategories.filter(function(e){return e.value===t.category}).length}).map(function(t){return l.a.createElement("div",{key:t.name,className:"col s12 m6 l4",style:{padding:"0.5rem"}},l.a.createElement("div",{className:"col s12  z-depth-1",style:{padding:0}},l.a.createElement("div",{className:"col s12 white rezbuild-text"},l.a.createElement("h6",null,l.a.createElement("b",null,t.name)),l.a.createElement("h6",null,t.company),l.a.createElement("span",{className:"new badge left ","data-badge-caption":"",style:{borderRadius:0,marginLeft:0}},t.category),l.a.createElement("span",{className:"new badge left rezbuild-text white",style:{marginLeft:0,borderStyle:"solid",borderRadius:0,lineHeight:"16px"},"data-badge-caption":""},l.a.createElement("b",null,t.family))),l.a.createElement("div",{className:"col s12 center white"},l.a.createElement("img",{className:"responsive-img",alt:"img/jpg/"+t.company.split(" ").join("")+"-"+t.name.split(" ").join("")+".jpg",src:"img/jpg/"+t.company.split(" ").join("")+"-"+t.name.split(" ").join("")+".jpg"})),l.a.createElement("div",{className:"col s12  white",style:{paddingBottom:"1rem"}},l.a.createElement("a",{className:"waves-effect waves-light btn white-text tooltipped",href:window.location.protocol+"//"+e.props.host+"/zip/"+t.company.split(" ").join("")+"-"+t.name.split(" ").join("")+".zip"},l.a.createElement("i",{className:"material-icons white-text left"},"cloud_download"),"Download"))))}))))}}]),t}(n.Component),mt=function(e){return l.a.createElement(E.Consumer,null,function(t){return l.a.createElement(ct,Object.assign({},e,{host:t.host,socket:t.socket,uploader:t.uploader}))})},dt=a(293),ut=a.n(dt),pt=a(294),ht=a.n(pt),ft=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(m.a)(t).call(this,e));var n=window.location.host;n=-1!==n.indexOf(":")?n.replace("3000","3001"):n.replace("app","api");var l=ut()(n),r=new ht.a(l);return a.state={host:n,socket:l,uploader:r},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,zIndex:-1,minHeight:"100%",minWidth:"1024px",width:"100%",height:"auto",background:"url('/img/png/background.png') no-repeat center center fixed",opacity:.2,backgroundSize:"cover"}}),l.a.createElement(E.Provider,{value:this.state},l.a.createElement(u.c,{history:u.d},l.a.createElement(u.b,{path:"/",component:H}),l.a.createElement(u.b,{path:"/signin",component:b}),l.a.createElement(u.b,{path:"/signup",component:j}),l.a.createElement(u.b,{path:"/technologies",component:mt}),l.a.createElement(u.b,{path:"/:_id",component:rt}),l.a.createElement(u.b,{path:"/:_id/signin",component:b}),l.a.createElement(u.b,{path:"/:_id/signup",component:j}))))}}]),t}(n.Component);s.a.render(l.a.createElement(ft,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}},[[323,2,1]]]);
//# sourceMappingURL=main.7c4bf3ff.chunk.js.map